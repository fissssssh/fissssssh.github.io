[{"content":"ä» K8s çš„å®¹å™¨ä¸­æ‹·è´æ–‡ä»¶å¯ä»¥ä½¿ç”¨kubectl cpå‘½ä»¤ï¼Œä½†æ˜¯å¯¹äºè¾ƒå¤§çš„æ–‡ä»¶ï¼ˆ100M ä»¥ä¸Šï¼‰å¯èƒ½å°±ä¸æ˜¯å¾ˆå¥½ä½¿äº†ï¼Œæ‹·è´è¿‡ç¨‹ç»å¸¸ä¼šå‡ºç°EOFé”™è¯¯\nå¯¹äºè¾ƒå¤§çš„æ–‡ä»¶ï¼Œæˆ‘æ˜¯è¿™æ ·æ“ä½œçš„ï¼š\nå‹ç¼©\né€šè¿‡å‹ç¼©å¯ä»¥å‡å°å¤§æ–‡ä»¶çš„ä½“ç§¯\ntar -czvf largefile.tar.gz largefile æ­¤æ“ä½œä¹Ÿå¯ä»¥ç”¨äºæ‰“åŒ…æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œä»¥ä¾¿è¾¾åˆ°æ‹·è´æ–‡ä»¶å¤¹çš„ç›®çš„\nåˆ†ç‰‡\nå¯¹äºä½“ç§¯è¾ƒå¤§çš„æ–‡ä»¶ï¼Œå³ä½¿å‹ç¼©åä»ç„¶æœ‰å¥½å‡ ç™¾ Mï¼Œè¿™æ—¶ä½¿ç”¨kubectl cpä¹Ÿä¸ä¸€å®šèƒ½å¤Ÿæ‹·è´ä¸‹æ¥ï¼Œæ‰€ä»¥éœ€è¦å¯¹å…¶åˆ†å‰²\nsplit -b 50M -d largefile.tar.gz largefile.tar.gz æ­¤æ“ä½œä¼šå°†largefile.tar.gzæŒ‰ç…§ 50M/æ¯ä¸ªæ–‡ä»¶çš„å¤§å°åˆ†å‰²ä¸ºå¤šä¸ªæ–‡ä»¶ï¼Œ-dé€‰é¡¹åˆ™æ˜¯ä½¿ç”¨æ•°å­—æ¥ä½œä¸ºåç¼€ï¼ˆé»˜è®¤æ˜¯è‹±æ–‡å­—æ¯ï¼‰\nä¾‹å¦‚ï¼šlargefile.tar.gzæœ‰ 220Mï¼Œåˆ™åˆ†å‰²åä¼šå˜ä¸º\nlargefile.tar.gz00 # 50M largefile.tar.gz01 # 50M largefile.tar.gz02 # 50M largefile.tar.gz03 # 50M largefile.tar.gz04 # 20M æ‹·è´\nä½¿ç”¨kubectl cpå‘½ä»¤æ‹·è´åˆ†å‰²åçš„æ–‡ä»¶\nkubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz00 kubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz01 kubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz02 kubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz03 kubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz04 å¯¹äºå¤šä¸ªå®¹å™¨çš„ Pod,å¯ä»¥ä½¿ç”¨-cé€‰é¡¹æŒ‡å®šå…·ä½“çš„å®¹å™¨\nåˆå¹¶ ä½¿ç”¨catå‘½ä»¤åˆå¹¶å¤šä¸ªæ–‡ä»¶\ncat largefile.tar.gz* \u0026gt; largefile.tar.gz å¯ä»¥ä½¿ç”¨md5sumå‘½ä»¤è®¡ç®—åˆå¹¶åçš„æ–‡ä»¶ hash å€¼ä¸å®¹å™¨å†…çš„æ–‡ä»¶ hash å€¼æ˜¯å¦ä¸€è‡´æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æœ‰ç¼ºå¤±\nè§£å‹\ntar -xzvf largefile.tar.gz è‡³æ­¤ï¼Œæˆ‘å°±å°†å¤§æ–‡ä»¶ä» Pod ä¸­æ‹·è´å‡ºæ¥äº†\n","permalink":"https://blog.fissssssh.com/posts/copy-large-file-from-k8s-pod/","summary":"ä» K8s çš„å®¹å™¨ä¸­æ‹·è´æ–‡ä»¶å¯ä»¥ä½¿ç”¨kubectl cpå‘½ä»¤ï¼Œä½†æ˜¯å¯¹äºè¾ƒå¤§çš„æ–‡ä»¶ï¼ˆ100M ä»¥ä¸Šï¼‰å¯èƒ½å°±ä¸æ˜¯å¾ˆå¥½ä½¿äº†ï¼Œæ‹·è´è¿‡ç¨‹ç»å¸¸ä¼šå‡ºç°EOFé”™è¯¯\nå¯¹äºè¾ƒå¤§çš„æ–‡ä»¶ï¼Œæˆ‘æ˜¯è¿™æ ·æ“ä½œçš„ï¼š\nå‹ç¼©\né€šè¿‡å‹ç¼©å¯ä»¥å‡å°å¤§æ–‡ä»¶çš„ä½“ç§¯\ntar -czvf largefile.tar.gz largefile æ­¤æ“ä½œä¹Ÿå¯ä»¥ç”¨äºæ‰“åŒ…æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œä»¥ä¾¿è¾¾åˆ°æ‹·è´æ–‡ä»¶å¤¹çš„ç›®çš„\nåˆ†ç‰‡\nå¯¹äºä½“ç§¯è¾ƒå¤§çš„æ–‡ä»¶ï¼Œå³ä½¿å‹ç¼©åä»ç„¶æœ‰å¥½å‡ ç™¾ Mï¼Œè¿™æ—¶ä½¿ç”¨kubectl cpä¹Ÿä¸ä¸€å®šèƒ½å¤Ÿæ‹·è´ä¸‹æ¥ï¼Œæ‰€ä»¥éœ€è¦å¯¹å…¶åˆ†å‰²\nsplit -b 50M -d largefile.tar.gz largefile.tar.gz æ­¤æ“ä½œä¼šå°†largefile.tar.gzæŒ‰ç…§ 50M/æ¯ä¸ªæ–‡ä»¶çš„å¤§å°åˆ†å‰²ä¸ºå¤šä¸ªæ–‡ä»¶ï¼Œ-dé€‰é¡¹åˆ™æ˜¯ä½¿ç”¨æ•°å­—æ¥ä½œä¸ºåç¼€ï¼ˆé»˜è®¤æ˜¯è‹±æ–‡å­—æ¯ï¼‰\nä¾‹å¦‚ï¼šlargefile.tar.gzæœ‰ 220Mï¼Œåˆ™åˆ†å‰²åä¼šå˜ä¸º\nlargefile.tar.gz00 # 50M largefile.tar.gz01 # 50M largefile.tar.gz02 # 50M largefile.tar.gz03 # 50M largefile.tar.gz04 # 20M æ‹·è´\nä½¿ç”¨kubectl cpå‘½ä»¤æ‹·è´åˆ†å‰²åçš„æ–‡ä»¶\nkubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz00 kubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz01 kubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz02 kubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz03 kubectl cp \u0026lt;pod-name\u0026gt;:largefile.tar.gz00 largefile.tar.gz04 å¯¹äºå¤šä¸ªå®¹å™¨çš„ Pod,å¯ä»¥ä½¿ç”¨-cé€‰é¡¹æŒ‡å®šå…·ä½“çš„å®¹å™¨\nåˆå¹¶ ä½¿ç”¨catå‘½ä»¤åˆå¹¶å¤šä¸ªæ–‡ä»¶\ncat largefile.","title":"ä» K8s çš„ Pod ä¸­æ‹·è´å¤§æ–‡ä»¶"},{"content":"Newtonsoft.Json æ˜¯ä¸€ä¸ªéå¸¸å—æ¬¢è¿çš„ .NET JSON æ¡†æ¶\nä¸€èˆ¬æ¥è¯´å¤§éƒ¨åˆ†ç”¨æˆ·ç”¨åˆ°çš„æ–¹æ³•ä¸»è¦å°±æ˜¯ JsonConvert.SerializeObject å’Œ JsonConvert.DeserializeObject æ–¹æ³•\nå‰è€…ç”¨äºå°† .NET å¯¹è±¡ åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²ï¼Œåè€…åˆ™æ˜¯å°† JSON å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸º .NET å¯¹è±¡\nä¸‹é¢æˆ‘å°†è®²è¿°ä¸€äº›ä½ å¯èƒ½ç”¨è¿‡æˆ–è€…æ²¡ç”¨è¿‡çš„ä¸€äº›å°æŠ€å·§\nå¡«å……å¯¹è±¡ æˆ‘ç°åœ¨æœ‰ä¸€ä¸ª {\u0026quot;name\u0026quot;:\u0026quot;fissssssh\u0026quot;} JSON å¯¹è±¡ï¼Œå½“å°†å®ƒè½¬ä¸ºDictionary\u0026lt;string,string\u0026gt;åï¼Œå¯ä»¥é€šè¿‡é”®ånameè·å–å±æ€§å€¼\nç„¶è€Œè¿™ä¸ª JSON ç°åœ¨å˜æˆ {\u0026quot;Name\u0026quot;:\u0026quot;fissssssh\u0026quot;}, æ— æ³•å†é€šè¿‡é”®å name è·å–å±æ€§å€¼\nDictionary æ˜¯æ”¯æŒæ›¿æ¢é”®åæ¯”è¾ƒå™¨çš„ï¼Œä½†æ˜¯ JsonConvert.DeserializeObject åªä¼šè°ƒç”¨å…¶æ— å‚æ„é€ å‡½æ•°\næˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°† Dictionary åˆ›å»ºå‡ºæ¥, ç„¶åé€šè¿‡ JsonConvert.PopulateObject æ–¹æ³•å°† JSON å­—ç¬¦ä¸²åºåˆ—åŒ–å¹¶å¡«å……è‡³æŒ‡å®šå¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹\nvar json = \u0026#34;{\\\u0026#34;Name\\\u0026#34;:\\\u0026#34;fissssssh\\\u0026#34;}\u0026#34;; // åˆ›å»ºä¸€ä¸ªé”®åå¿½ç•¥å¤§å°å†™çš„å­—å…¸å¯¹è±¡ var dict = new Dictionary\u0026lt;string,string\u0026gt;(StringComparer.InvariantCultureIgnoreCase); JsonConvert.PopulateObject(json, dict); // ä½¿ç”¨ name è·å– JSON ä¸­çš„ Name å±æ€§å€¼ var name = dict[\u0026#34;name\u0026#34;]; ä»æµè¿›è¡Œååºåˆ—åŒ– æœ‰äº›æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ååºåˆ—åŒ–æ¥è‡ªç½‘ç»œè¯·æ±‚æˆ–è€…æ–‡ä»¶ä¸­ JSONï¼Œå®ƒä»¬é€šå¸¸æ˜¯ä»¥æµçš„å½¢å¼æŒæœ‰ï¼Œååºåˆ—åŒ–å…ˆå°†å…¶è¯»å–ä¸ºå­—ç¬¦ä¸²ï¼Œå½“ JSON å†…å®¹è¿‡å¤§çš„æ—¶å€™ä¼šäº§ç”Ÿä¸€ä¸ªå·¨å¤§çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¦‚æœæ­¤æ“ä½œæ¯”è¾ƒé¢‘ç¹åˆ™ä¼šå¯¹æ€§èƒ½äº§ç”Ÿæ¯”è¾ƒå¤§çš„å½±å“\nNewtonsoft.JSON å¹¶æ²¡æœ‰ç›´æ¥æä¾›ä»æµååºåˆ—åŒ–çš„æ–¹æ³•ï¼Œä½†æˆ‘ä»¬å¯ä»¥è¿™æ ·æ“ä½œï¼š\nusing var stream = ReadStreamFromFileOrNetwork(); using var sr = new StreamReader(stream); var serializer = JsonSerializer.Create(); return serializer.Deserialize\u0026lt;List\u0026lt;Root\u0026gt;\u0026gt;(new JsonTextReader(sr)); æˆ‘ä½¿ç”¨ä»¥ä¸‹ä»£ç å¯¹ç›´æ¥ä»æµååºåˆ—åŒ–å’Œå…ˆè½¬ä¸ºå­—ç¬¦ä¸²å†ååºåˆ—åŒ–åšäº†åŸºå‡†æµ‹è¯•è¿›è¡Œæ¯”è¾ƒ\n[MemoryDiagnoser, ShortRunJob] public class DeserializeFromStreamDirectlyVsDeserializeAfterConvertStreamToString { private byte[] data = null!; [GlobalSetup] public void Setup() { data = File.ReadAllBytes(\u0026#34;large-file.json\u0026#34;); } [Benchmark] public List\u0026lt;Root\u0026gt;? DeserializeFromStreamDirectly() { using var ms = new MemoryStream(data); using var sr = new StreamReader(ms); var serializer = JsonSerializer.Create(); return serializer.Deserialize\u0026lt;List\u0026lt;Root\u0026gt;\u0026gt;(new JsonTextReader(sr)); } [Benchmark] public List\u0026lt;Root\u0026gt;? DeserializeAfterConvertStreamToString() { using var ms = new MemoryStream(data); using var sr = new StreamReader(ms); var json = sr.ReadToEnd(); return JsonConvert.DeserializeObject\u0026lt;List\u0026lt;Root\u0026gt;\u0026gt;(json); } } æµ‹è¯• JSON æ–‡ä»¶æ¥è‡ª json-iterator/test-data/large-file.json\næµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š\nBenchmarkDotNet=v0.13.5, OS=Windows 11 (10.0.22621.1265/22H2/2022Update/SunValley2) AMD Ryzen 9 5900X, 1 CPU, 24 logical and 12 physical cores .NET SDK=7.0.100 [Host] : .NET 7.0.0 (7.0.22.51805), X64 RyuJIT AVX2 ShortRun : .NET 7.0.0 (7.0.22.51805), X64 RyuJIT AVX2 Job=ShortRun IterationCount=3 LaunchCount=1 WarmupCount=3 Method Mean Error StdDev Gen0 Gen1 Gen2 Allocated DeserializeFromStreamDirectly 119.4 ms 9.73 ms 0.53 ms 4400.0000 2000.0000 800.0000 60.35 MB DeserializeAfterConvertStreamToString 143.5 ms 45.52 ms 2.50 ms 8250.0000 6000.0000 1750.0000 160.15 MB å¯ä»¥çœ‹å‡ºæ—¶é—´ä¸Šé¢äºŒè€…æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œä½†æ˜¯åœ¨å†…å­˜åˆ†é…ä¸Šè¶³è¶³çœäº† 100MB!\n","permalink":"https://blog.fissssssh.com/posts/newtonsoft-json-tips/","summary":"Newtonsoft.Json æ˜¯ä¸€ä¸ªéå¸¸å—æ¬¢è¿çš„ .NET JSON æ¡†æ¶\nä¸€èˆ¬æ¥è¯´å¤§éƒ¨åˆ†ç”¨æˆ·ç”¨åˆ°çš„æ–¹æ³•ä¸»è¦å°±æ˜¯ JsonConvert.SerializeObject å’Œ JsonConvert.DeserializeObject æ–¹æ³•\nå‰è€…ç”¨äºå°† .NET å¯¹è±¡ åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²ï¼Œåè€…åˆ™æ˜¯å°† JSON å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸º .NET å¯¹è±¡\nä¸‹é¢æˆ‘å°†è®²è¿°ä¸€äº›ä½ å¯èƒ½ç”¨è¿‡æˆ–è€…æ²¡ç”¨è¿‡çš„ä¸€äº›å°æŠ€å·§\nå¡«å……å¯¹è±¡ æˆ‘ç°åœ¨æœ‰ä¸€ä¸ª {\u0026quot;name\u0026quot;:\u0026quot;fissssssh\u0026quot;} JSON å¯¹è±¡ï¼Œå½“å°†å®ƒè½¬ä¸ºDictionary\u0026lt;string,string\u0026gt;åï¼Œå¯ä»¥é€šè¿‡é”®ånameè·å–å±æ€§å€¼\nç„¶è€Œè¿™ä¸ª JSON ç°åœ¨å˜æˆ {\u0026quot;Name\u0026quot;:\u0026quot;fissssssh\u0026quot;}, æ— æ³•å†é€šè¿‡é”®å name è·å–å±æ€§å€¼\nDictionary æ˜¯æ”¯æŒæ›¿æ¢é”®åæ¯”è¾ƒå™¨çš„ï¼Œä½†æ˜¯ JsonConvert.DeserializeObject åªä¼šè°ƒç”¨å…¶æ— å‚æ„é€ å‡½æ•°\næˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°† Dictionary åˆ›å»ºå‡ºæ¥, ç„¶åé€šè¿‡ JsonConvert.PopulateObject æ–¹æ³•å°† JSON å­—ç¬¦ä¸²åºåˆ—åŒ–å¹¶å¡«å……è‡³æŒ‡å®šå¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹\nvar json = \u0026#34;{\\\u0026#34;Name\\\u0026#34;:\\\u0026#34;fissssssh\\\u0026#34;}\u0026#34;; // åˆ›å»ºä¸€ä¸ªé”®åå¿½ç•¥å¤§å°å†™çš„å­—å…¸å¯¹è±¡ var dict = new Dictionary\u0026lt;string,string\u0026gt;(StringComparer.InvariantCultureIgnoreCase); JsonConvert.PopulateObject(json, dict); // ä½¿ç”¨ name è·å– JSON ä¸­çš„ Name å±æ€§å€¼ var name = dict[\u0026#34;name\u0026#34;]; ä»æµè¿›è¡Œååºåˆ—åŒ– æœ‰äº›æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ååºåˆ—åŒ–æ¥è‡ªç½‘ç»œè¯·æ±‚æˆ–è€…æ–‡ä»¶ä¸­ JSONï¼Œå®ƒä»¬é€šå¸¸æ˜¯ä»¥æµçš„å½¢å¼æŒæœ‰ï¼Œååºåˆ—åŒ–å…ˆå°†å…¶è¯»å–ä¸ºå­—ç¬¦ä¸²ï¼Œå½“ JSON å†…å®¹è¿‡å¤§çš„æ—¶å€™ä¼šäº§ç”Ÿä¸€ä¸ªå·¨å¤§çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¦‚æœæ­¤æ“ä½œæ¯”è¾ƒé¢‘ç¹åˆ™ä¼šå¯¹æ€§èƒ½äº§ç”Ÿæ¯”è¾ƒå¤§çš„å½±å“","title":"Newtonsoft.Json å°æŠ€å·§"},{"content":"åœ¨ä½ ä½¿ç”¨ git çš„è¿‡ç¨‹ä¸­ï¼Œä½ æ˜¯å¦æœ‰è¿‡ä»¥ä¸‹é—®é¢˜ï¼š\næäº¤ä¿¡æ¯å†™é”™äº† æäº¤äº†ä¸è¯¥æäº¤çš„æ–‡ä»¶ï¼ˆä¾‹å¦‚æŸäº›è°ƒè¯•è¿‡ç¨‹äº§ç”Ÿçš„æ–‡ä»¶ï¼‰ â€¦â€¦ å¦‚æœè¿™äº›é—®é¢˜ä»…å­˜åœ¨äºæœ¬åœ°ï¼Œé‚£ä¹ˆæœ‰å¾ˆå¤šç§è§£å†³åŠæ³•ï¼Œæ¯”å¦‚ä½¿ç”¨ commit --amendï¼Œ rebase ç­‰æŒ‡ä»¤ï¼Œå¤§ä¸äº†å°± reset --mixed å†é‡æ–° commit\nä½†æ˜¯å¦‚æœä½ è¿‡äº†å¥½å‡ ä¸ªç”šè‡³å¥½å‡ åä¸ªæäº¤æ‰å‘ç°è¿™äº›é—®é¢˜ï¼Œé‚£ä¹ˆç”¨ä¸Šè¿°æ–¹æ³•å°±ä¸å¤ªå¥½è§£å†³äº†\ngit-filter-repo git-filter-repo æ˜¯ä¸€ä¸ªç”¨äºé‡å†™å†å²æäº¤çš„å¤šåŠŸèƒ½å·¥å…·ï¼Œå®ƒå’Œ git filter-branch æ¯”è¾ƒç›¸ä¼¼ï¼Œä½†æ˜¯å…¶æ€§èƒ½è¿œè¿œä¼˜äºåè€…\ngit å®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨ git-filter-repo è€Œä¸æ˜¯ git filter-branch\nå®‰è£… å‰ç½® git \u0026gt;= 2.22.0 at a minimum; some features require git \u0026gt;= 2.24.0 or later python3 \u0026gt;= 3.5 åŒ…ç®¡ç†å™¨å®‰è£… PACKAGE_TOOL install git-filter-repo æ‰‹åŠ¨å®‰è£… ä¸‹è½½æœ€æ–°çš„ Release è§£å‹åå°† git-filter-repo æ–‡ä»¶å¤åˆ¶åˆ° git --exec-path æ–‡ä»¶å¤¹ä¸‹\nå¦‚æœä½ çš„ python3 æŒ‡ä»¤è¢«å‘½åä¸º python ï¼Œä½ è¿˜éœ€è¦å°† git-filter-repo æ–‡ä»¶ç¬¬ä¸€è¡Œä¸­çš„ python3 æ”¹ä¸º pythonï¼ˆæ­¤é—®é¢˜å›°æ‰°äº†å¤§éƒ¨åˆ† Windows ç”¨æˆ·ï¼‰\nä¾‹å­ æœ¬ä¾‹å­ä½¿ç”¨ä»¥ä¸‹ä»“åº“ï¼Œå†å²æäº¤ä¿¡æ¯å¦‚ä¸‹\ngit log --stat commit c13190a52fddf8db5d561659ae01aa32276f865e (HEAD -\u0026gt; master) Author: fissssssh \u0026lt;fissssssh@email.com\u0026gt; Date: Tue Mar 7 12:42:20 2023 +0800 modify a.txt a.txt | 1 + 1 file changed, 1 insertion(+) commit 258ba82351e483d12f3876764feb2451295c3d9d Author: fissssssh \u0026lt;fissssssh@email.com\u0026gt; Date: Tue Mar 7 12:41:43 2023 +0800 commit a.txt .vscode/launch.json | 26 ++++++++++++++++++++++++++ .vscode/tasks.json | 41 +++++++++++++++++++++++++++++++++++++++++ a.txt | 1 + bigfile | Bin 0 -\u0026gt; 209715201 bytes 4 files changed, 68 insertions(+) åˆ é™¤é”™è¯¯æäº¤çš„æ–‡ä»¶ ä¸Šè¿°ä»“åº“ä¸­æœ‰ä¸¤ä¸ªæäº¤ï¼Œæˆ‘åœ¨åˆæ¬¡æäº¤çš„æ—¶å€™ä¸å°å¿ƒå°† .vscode å’Œ bigfile æäº¤äº†ï¼Œå¹¶ä¸”åç»­è¿˜è¿½åŠ äº†ä¸€ä¸ªæäº¤\nç°åœ¨ä½¿ç”¨ git-filter-repo æ¥åˆ é™¤å¤šä½™çš„æ–‡ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š\ngit filter-repo --path a.txt --path é€‰é¡¹è¡¨ç¤ºåªä¿ç•™æ­¤æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª --path é€‰é¡¹\nç±»ä¼¼çš„é€‰é¡¹è¿˜æœ‰ --path-globï¼Œ --path-regex\nä½¿ç”¨ --invert-paths å‚æ•°å¯ä»¥å°†é€‰ä¸­çš„æ–‡ä»¶å˜ä¸ºåé€‰\nè¾“å‡ºå¦‚ä¸‹ï¼š\nAborting: Refusing to destructively overwrite repo history since this does not look like a fresh clone. (expected at most one entry in the reflog for HEAD) Please operate on a fresh clone instead. If you want to proceed anyway, use --force. æ„æ€å°±æ˜¯è¯´ä½ è¿™ä¸ªä»“åº“ä¸æ˜¯åˆšå…‹éš†äº†ï¼Œè¯·ä½¿ç”¨æ–°å…‹éš†çš„ä»“åº“æ‰§è¡Œæ“ä½œï¼Œå¦‚æœä½ ç¡¬è¦æ“ä½œè¯·åŠ ä¸Š --force é€‰é¡¹ã€‚æˆ‘ä»¬è¿™é‡Œæ˜¯ä½¿ç”¨çš„æµ‹è¯•ä»“åº“ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç®¡è¿™æ¡æ¶ˆæ¯ï¼Œé‡æ–°æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š\ngit filter-repo --path a.txt --force è¾“å‡ºå¦‚ä¸‹ï¼š\nParsed 2 commits New history written in 0.01 seconds; now repacking/cleaning... Repacking your repo and cleaning out old unneeded objects HEAD ç°åœ¨ä½äº a1e776f modify a.txt æšä¸¾å¯¹è±¡ä¸­: 6, å®Œæˆ. å¯¹è±¡è®¡æ•°ä¸­: 100% (6/6), å®Œæˆ. ä½¿ç”¨ 16 ä¸ªçº¿ç¨‹è¿›è¡Œå‹ç¼© å‹ç¼©å¯¹è±¡ä¸­: 100% (2/2), å®Œæˆ. å†™å…¥å¯¹è±¡ä¸­: 100% (6/6), å®Œæˆ. æ€»å…± 6ï¼ˆå·®å¼‚ 0ï¼‰ï¼Œå¤ç”¨ 0ï¼ˆå·®å¼‚ 0ï¼‰ï¼ŒåŒ…å¤ç”¨ 0 Completely finished after 0.05 seconds. è®©æˆ‘ä»¬é‡æ–°çœ‹ä¸€ä¸‹æäº¤å†å²\ngit log --stat commit a1e776f3d90e2023fc59e66815d8392151a7f612 (HEAD -\u0026gt; master) Author: fissssssh \u0026lt;fissssssh@email.com\u0026gt; Date: Tue Mar 7 12:42:20 2023 +0800 modify a.txt a.txt | 1 + 1 file changed, 1 insertion(+) commit 57d35f202e92be0fa34c8e771266c0c4e5a65f1a Author: fissssssh \u0026lt;fissssssh@email.com\u0026gt; Date: Tue Mar 7 12:41:43 2023 +0800 commit a.txt a.txt | 1 + 1 file changed, 1 insertion(+) ç»†å¿ƒçš„ä½ ä¼šå‘ç°æäº¤çš„ hash å€¼ä¹Ÿå˜äº†ï¼Œè¿™æ˜¯å¿…ç„¶çš„\næ›´æ”¹æäº¤æ–‡ä»¶çš„æ–‡ä»¶åç§° ç°åœ¨æˆ‘å‘ç° a.txt è¿™ä¸ªåç§°ä¸å¤Ÿå¥½ï¼Œæˆ‘æƒ³æ¢æˆ b.txtï¼Œåªéœ€æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š\ngit filter-repo --path-rename a.txt:b.txt è¾“å‡ºå¦‚ä¸‹ï¼š\nParsed 2 commits New history written in 0.02 seconds; now repacking/cleaning... Repacking your repo and cleaning out old unneeded objects HEAD ç°åœ¨ä½äº 435a640 modify a.txt æšä¸¾å¯¹è±¡ä¸­: 6, å®Œæˆ. å¯¹è±¡è®¡æ•°ä¸­: 100% (6/6), å®Œæˆ. ä½¿ç”¨ 16 ä¸ªçº¿ç¨‹è¿›è¡Œå‹ç¼© å‹ç¼©å¯¹è±¡ä¸­: 100% (2/2), å®Œæˆ. å†™å…¥å¯¹è±¡ä¸­: 100% (6/6), å®Œæˆ. æ€»å…± 6ï¼ˆå·®å¼‚ 0ï¼‰ï¼Œå¤ç”¨ 2ï¼ˆå·®å¼‚ 0ï¼‰ï¼ŒåŒ…å¤ç”¨ 0 Completely finished after 0.05 seconds. è®©æˆ‘ä»¬é‡æ–°çœ‹ä¸€ä¸‹æäº¤å†å²\ngit log --stat commit 435a640f4b8a42bfe06a5695a7ff4dd061f2d3b5 (HEAD -\u0026gt; master) Author: fissssssh \u0026lt;fissssssh@email.com\u0026gt; Date: Tue Mar 7 12:42:20 2023 +0800 modify a.txt b.txt | 1 + 1 file changed, 1 insertion(+) commit 000c714faced2aede9ae18c294ef4b9698cd52be Author: fissssssh \u0026lt;fissssssh@email.com\u0026gt; Date: Tue Mar 7 12:41:43 2023 +0800 commit a.txt b.txt | 1 + 1 file changed, 1 insertion(+) æ›´æ”¹æäº¤ä¿¡æ¯ æ–‡ä»¶åæ”¹äº†ï¼Œæäº¤ä¿¡æ¯è¿˜æ²¡å˜ï¼Œè®©æˆ‘ä»¬å†æ¥ä¿®æ”¹æäº¤ä¿¡æ¯\nä¿®æ”¹æäº¤ä¿¡æ¯éœ€è¦ä¸€ä¸ªæ›¿æ¢æ–‡ä»¶ï¼Œåˆ›å»º expressions.txt æ–‡ä»¶ï¼š\ncat \u0026lt;\u0026lt;EOF \u0026gt; expressions.txt a.txt==\u0026gt;b.txt EOF ä½ å¯ä»¥ç”¨ä»»ä½•æ–¹å¼å»åˆ›å»ºæ–‡ä»¶\næ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š\ngit filter-repo --replace-message expressions.txt è¾“å‡ºå¦‚ä¸‹ï¼š\nParsed 2 commits New history written in 0.02 seconds; now repacking/cleaning... Repacking your repo and cleaning out old unneeded objects HEAD ç°åœ¨ä½äº 49d497e modify b.txt æšä¸¾å¯¹è±¡ä¸­: 6, å®Œæˆ. å¯¹è±¡è®¡æ•°ä¸­: 100% (6/6), å®Œæˆ. ä½¿ç”¨ 16 ä¸ªçº¿ç¨‹è¿›è¡Œå‹ç¼© å‹ç¼©å¯¹è±¡ä¸­: 100% (2/2), å®Œæˆ. å†™å…¥å¯¹è±¡ä¸­: 100% (6/6), å®Œæˆ. æ€»å…± 6ï¼ˆå·®å¼‚ 0ï¼‰ï¼Œå¤ç”¨ 4ï¼ˆå·®å¼‚ 0ï¼‰ï¼ŒåŒ…å¤ç”¨ 0 Completely finished after 0.05 seconds. è®©æˆ‘ä»¬é‡æ–°çœ‹ä¸€ä¸‹æäº¤å†å²ï¼š\ngit log --stat commit 49d497e61b0370a6f6e23ed740eaa045be569361 (HEAD -\u0026gt; master) Author: fissssssh \u0026lt;fissssssh@email.com\u0026gt; Date: Tue Mar 7 12:42:20 2023 +0800 modify b.txt b.txt | 1 + 1 file changed, 1 insertion(+) commit baabe05301b0a38057538d47e3b7b899cd348935 Author: fissssssh \u0026lt;fissssssh@email.com\u0026gt; Date: Tue Mar 7 12:41:43 2023 +0800 commit b.txt b.txt | 1 + 1 file changed, 1 insertion(+) æ›´æ–°è‡³è¿œç«¯ä»“åº“ æ­¤æ­¥éª¤è°¨æ…æ“ä½œï¼è°¨æ…æ“ä½œï¼è°¨æ…æ“ä½œï¼\nç”±äºå†å²æäº¤ hash å·²å˜æ›´ï¼Œåªèƒ½å¼ºåˆ¶æ¨é€\ngit push -f origin master æœ€å git-filter-repo æå¤§çš„ç®€åŒ–äº†é‡å†™ git æäº¤å†å²çš„æ“ä½œï¼Œè¿™é‡Œä»‹ç»çš„åªæ˜¯ä¹ç‰›ä¸€æ¯›ï¼Œæ›´å¤šçš„æ“ä½œå¯ä»¥å‚è€ƒå®˜æ–¹ç”¨æˆ·æ‰‹å†Œ\n","permalink":"https://blog.fissssssh.com/posts/rewrite-git-repo-history/","summary":"åœ¨ä½ ä½¿ç”¨ git çš„è¿‡ç¨‹ä¸­ï¼Œä½ æ˜¯å¦æœ‰è¿‡ä»¥ä¸‹é—®é¢˜ï¼š\næäº¤ä¿¡æ¯å†™é”™äº† æäº¤äº†ä¸è¯¥æäº¤çš„æ–‡ä»¶ï¼ˆä¾‹å¦‚æŸäº›è°ƒè¯•è¿‡ç¨‹äº§ç”Ÿçš„æ–‡ä»¶ï¼‰ â€¦â€¦ å¦‚æœè¿™äº›é—®é¢˜ä»…å­˜åœ¨äºæœ¬åœ°ï¼Œé‚£ä¹ˆæœ‰å¾ˆå¤šç§è§£å†³åŠæ³•ï¼Œæ¯”å¦‚ä½¿ç”¨ commit --amendï¼Œ rebase ç­‰æŒ‡ä»¤ï¼Œå¤§ä¸äº†å°± reset --mixed å†é‡æ–° commit\nä½†æ˜¯å¦‚æœä½ è¿‡äº†å¥½å‡ ä¸ªç”šè‡³å¥½å‡ åä¸ªæäº¤æ‰å‘ç°è¿™äº›é—®é¢˜ï¼Œé‚£ä¹ˆç”¨ä¸Šè¿°æ–¹æ³•å°±ä¸å¤ªå¥½è§£å†³äº†\ngit-filter-repo git-filter-repo æ˜¯ä¸€ä¸ªç”¨äºé‡å†™å†å²æäº¤çš„å¤šåŠŸèƒ½å·¥å…·ï¼Œå®ƒå’Œ git filter-branch æ¯”è¾ƒç›¸ä¼¼ï¼Œä½†æ˜¯å…¶æ€§èƒ½è¿œè¿œä¼˜äºåè€…\ngit å®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨ git-filter-repo è€Œä¸æ˜¯ git filter-branch\nå®‰è£… å‰ç½® git \u0026gt;= 2.22.0 at a minimum; some features require git \u0026gt;= 2.24.0 or later python3 \u0026gt;= 3.5 åŒ…ç®¡ç†å™¨å®‰è£… PACKAGE_TOOL install git-filter-repo æ‰‹åŠ¨å®‰è£… ä¸‹è½½æœ€æ–°çš„ Release è§£å‹åå°† git-filter-repo æ–‡ä»¶å¤åˆ¶åˆ° git --exec-path æ–‡ä»¶å¤¹ä¸‹\nå¦‚æœä½ çš„ python3 æŒ‡ä»¤è¢«å‘½åä¸º python ï¼Œä½ è¿˜éœ€è¦å°† git-filter-repo æ–‡ä»¶ç¬¬ä¸€è¡Œä¸­çš„ python3 æ”¹ä¸º pythonï¼ˆæ­¤é—®é¢˜å›°æ‰°äº†å¤§éƒ¨åˆ† Windows ç”¨æˆ·ï¼‰","title":"é‡å†™ä½ çš„ Git ä»“åº“å†å²"},{"content":"ä»€ä¹ˆæ˜¯ HTTP æŸ¥è¯¢å­—ç¬¦ä¸² ä¾‹å¦‚æ­¤ URLï¼šhttps://example.com:80/query?key1=value2\u0026amp;key2=value2\nå¯¹å…¶æ‹†è§£æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹éƒ¨åˆ†ï¼š\nhttpsï¼šåè®® :// example.comï¼šåŸŸå :80ï¼šç«¯å£ /queryï¼šè·¯å¾„ ?key1=value2\u0026amp;key2=value2ï¼šå‚æ•°ï¼ˆä¹Ÿç§°ä½œæŸ¥è¯¢å­—ç¬¦ä¸²ï¼‰ å¦‚ä½•ç”Ÿæˆ HTTP æŸ¥è¯¢å­—ç¬¦ä¸² æš´åŠ›æ‹¼æ¥ ç•¥\nSystem.Web.HttpUtility var query = HttpUtility.ParseQueryString(string.Empty); query[\u0026#34;a+b\u0026#34;] = \u0026#34;a%b\u0026#34;; query[\u0026#34;b\u0026#34;] = \u0026#34;2+1\u0026#34;; var queryString = query.ToString(); // a+b=a%25b\u0026amp;b=2%2b1 HttpUtility.ParseQueryString(string.Empty) ä¼šè¿”å›ä¸€ä¸ªç©ºçš„NameValueCollectionï¼Œä½ åªéœ€è¦å¾€é‡Œé¢å¡«å……å‚æ•°ç„¶åè°ƒç”¨ToString()å³å¯ç”ŸæˆæŸ¥è¯¢å­—ç¬¦ä¸²\næ‚¨ä¸èƒ½ä½¿ç”¨ new NameValueCollection() æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œå› ä¸º HttpUtility.ParseQueryString(string) è¿”å›çš„å®é™…æ˜¯ HttpQSCollection ç±»å‹ï¼Œè¯¥ç±»å‹æ˜¯ NameValueCollection çš„æ´¾ç”Ÿç±»å‹ä¸”ä¸å¯¹å¤–å…¬å¼€ï¼Œæ‰€ä»¥ä½ ä¹Ÿæ— æ³•é€šè¿‡ new å…³é”®å­—æ¥åˆ›å»º HttpQSCollection ç±»å‹\næ­¤æ–¹æ³•ç”Ÿæˆçš„æŸ¥è¯¢å­—ç¬¦ä¸²åªä¼šè½¬ä¹‰ value ä¸”ä¸åŒ…å«å‰å¯¼å­—ç¬¦ ?\nMicrosoft.AspNetCore.Http.QueryString æ­¤æ–¹æ³•ä»…é€‚ç”¨äº SDK ä¸º Microsoft.NET.Sdk.Web çš„é¡¹ç›®\nvar queryString = QueryString.Create(new Dictionary\u0026lt;string, string?\u0026gt; { [\u0026#34;a+b\u0026#34;] = \u0026#34;a%b\u0026#34;, [\u0026#34;b\u0026#34;] = \u0026#34;2+1\u0026#34;, }).ToString(); // ?a%2Bb=a%25b\u0026amp;b=2%2B1 æ­¤æ–¹æ³•ç”Ÿæˆçš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¼šè½¬ä¹‰ key å’Œ value ä¸”åŒ…å«å‰å¯¼å­—ç¬¦ ?\né™¤äº†è°ƒç”¨ ToString() ä¹Ÿå¯ä»¥è°ƒç”¨ ToUriComponent()ï¼ŒäºŒè€…æ•ˆæœç›¸åŒ\n","permalink":"https://blog.fissssssh.com/posts/generate-http-query-string/","summary":"ä»€ä¹ˆæ˜¯ HTTP æŸ¥è¯¢å­—ç¬¦ä¸² ä¾‹å¦‚æ­¤ URLï¼šhttps://example.com:80/query?key1=value2\u0026amp;key2=value2\nå¯¹å…¶æ‹†è§£æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹éƒ¨åˆ†ï¼š\nhttpsï¼šåè®® :// example.comï¼šåŸŸå :80ï¼šç«¯å£ /queryï¼šè·¯å¾„ ?key1=value2\u0026amp;key2=value2ï¼šå‚æ•°ï¼ˆä¹Ÿç§°ä½œæŸ¥è¯¢å­—ç¬¦ä¸²ï¼‰ å¦‚ä½•ç”Ÿæˆ HTTP æŸ¥è¯¢å­—ç¬¦ä¸² æš´åŠ›æ‹¼æ¥ ç•¥\nSystem.Web.HttpUtility var query = HttpUtility.ParseQueryString(string.Empty); query[\u0026#34;a+b\u0026#34;] = \u0026#34;a%b\u0026#34;; query[\u0026#34;b\u0026#34;] = \u0026#34;2+1\u0026#34;; var queryString = query.ToString(); // a+b=a%25b\u0026amp;b=2%2b1 HttpUtility.ParseQueryString(string.Empty) ä¼šè¿”å›ä¸€ä¸ªç©ºçš„NameValueCollectionï¼Œä½ åªéœ€è¦å¾€é‡Œé¢å¡«å……å‚æ•°ç„¶åè°ƒç”¨ToString()å³å¯ç”ŸæˆæŸ¥è¯¢å­—ç¬¦ä¸²\næ‚¨ä¸èƒ½ä½¿ç”¨ new NameValueCollection() æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œå› ä¸º HttpUtility.ParseQueryString(string) è¿”å›çš„å®é™…æ˜¯ HttpQSCollection ç±»å‹ï¼Œè¯¥ç±»å‹æ˜¯ NameValueCollection çš„æ´¾ç”Ÿç±»å‹ä¸”ä¸å¯¹å¤–å…¬å¼€ï¼Œæ‰€ä»¥ä½ ä¹Ÿæ— æ³•é€šè¿‡ new å…³é”®å­—æ¥åˆ›å»º HttpQSCollection ç±»å‹\næ­¤æ–¹æ³•ç”Ÿæˆçš„æŸ¥è¯¢å­—ç¬¦ä¸²åªä¼šè½¬ä¹‰ value ä¸”ä¸åŒ…å«å‰å¯¼å­—ç¬¦ ?\nMicrosoft.AspNetCore.Http.QueryString æ­¤æ–¹æ³•ä»…é€‚ç”¨äº SDK ä¸º Microsoft.NET.Sdk.Web çš„é¡¹ç›®\nvar queryString = QueryString.Create(new Dictionary\u0026lt;string, string?\u0026gt; { [\u0026#34;a+b\u0026#34;] = \u0026#34;a%b\u0026#34;, [\u0026#34;b\u0026#34;] = \u0026#34;2+1\u0026#34;, }).","title":"ç”Ÿæˆ HTTP æŸ¥è¯¢å­—ç¬¦ä¸²"},{"content":"utterances æ˜¯åŸºäº GitHub issues æ„å»ºçš„è½»é‡çº§è¯„è®ºå°éƒ¨ä»¶ï¼Œé€šè¿‡æ­¤ç»„ä»¶å¯ä»¥å°† Github issues åº”ç”¨äºä»»ä½•ç½‘ç«™\nå‰ç½®æ¡ä»¶ ä¸€ä¸ªå…¬å¼€çš„ github repo åœ¨è¯¥ repo ä¸­å®‰è£…utterances app ç®€å•é›†æˆ æ‰“å¼€utteranceså®˜ç½‘\nåœ¨ configuration èŠ‚ç‚¹å¡«å†™ repo ä¿¡æ¯ç­‰ï¼Œå¡«å†™å¥½åä¼šç”Ÿæˆå¯¹åº”çš„ç»„ä»¶ä»£ç \næˆ‘ä½¿ç”¨çš„æ˜¯ PaperMod1 ä¸»é¢˜ï¼Œå°†ç”Ÿæˆå¥½çš„ä»£ç æ”¾å…¥layouts/partials/comments.html\n\u0026lt;!--layouts/partials/comments.html--\u0026gt; \u0026lt;script src=\u0026#34;https://utteranc.es/client.js\u0026#34; repo=\u0026#34;[ENTER REPO HERE]\u0026#34; issue-term=\u0026#34;pathname\u0026#34; theme=\u0026#34;github-light\u0026#34; label=\u0026#34;Comment\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; async \u0026gt;\u0026lt;/script\u0026gt; ç„¶ååœ¨config.yamlä¸­å¼€å¯è¯„è®ºåŠŸèƒ½å³å¯ç®€å•é›†æˆ\nparams: comments: true åŠ¨æ€ä¸»é¢˜é€‚é… PaperMod æœ‰æ˜äº®å’Œæš—é»‘ä¸¤ç§é¢œè‰²æ¨¡å¼ï¼Œè€Œ utterances çš„ä¸»é¢˜æ˜¯ç¼–ç æ—¶å°±å†™åœ¨scriptæ ‡ç­¾ä¸­çš„ï¼Œä¸ºäº†ä½¿ comments ç»„ä»¶çš„ä¸»é¢˜é€‚é… PaperMod é¢œè‰²ä¸»é¢˜ï¼Œæœ‰ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š\nä¸»é¢˜åŠ¨æ€åˆå§‹åŒ– \u0026lt;!-- layouts/partials/comments.html --\u0026gt; \u0026lt;script\u0026gt; (function () { let theme = localStorage.getItem(\u0026#34;pref-theme\u0026#34;); // already has prefer theme if (theme) { theme = theme === \u0026#34;dark\u0026#34; ? \u0026#34;github-dark\u0026#34; : \u0026#34;github-light\u0026#34;; } // auto detected else { theme = window.matchMedia(\u0026#34;(prefers-color-scheme: dark)\u0026#34;).matches ? \u0026#34;github-dark\u0026#34; : \u0026#34;github-light\u0026#34;; } const comment = document.createElement(\u0026#34;script\u0026#34;); comment.src = \u0026#34;https://utteranc.es/client.js\u0026#34;; comment.crossorigin = \u0026#34;anonymous\u0026#34;; comment.async = true; comment.setAttribute(\u0026#34;repo\u0026#34;, \u0026#34;fissssssh/fissssssh.github.io\u0026#34;); comment.setAttribute(\u0026#34;issue-term\u0026#34;, \u0026#34;pathname\u0026#34;); comment.setAttribute(\u0026#34;label\u0026#34;, \u0026#34;Comment\u0026#34;); comment.setAttribute(\u0026#34;theme\u0026#34;, theme); document.body.appendChild(comment); })(); \u0026lt;/script\u0026gt; ç”¨æˆ·æœªåˆ‡æ¢ä¸»é¢˜æ—¶ï¼ŒLocal Storage ä¸­è¿˜æ²¡æœ‰ pref-theme çš„å€¼ï¼Œéœ€è¦è¯†åˆ«ç³»ç»Ÿä¸»é¢˜æ¥ç¡®å®šè¯„è®ºç»„ä»¶çš„ä¸»é¢˜\nä¸»é¢˜åŠ¨æ€åˆ‡æ¢ \u0026lt;!-- layouts/partials/extend_footer.html --\u0026gt; {{- if (not site.Params.disableThemeToggle) }} \u0026lt;script\u0026gt; document.getElementById(\u0026#34;theme-toggle\u0026#34;).addEventListener(\u0026#34;click\u0026#34;, () =\u0026gt; { const iframe = document.querySelector(\u0026#34;.utterances-frame\u0026#34;); const message = { type: \u0026#34;set-theme\u0026#34;, theme: localStorage.getItem(\u0026#34;pref-theme\u0026#34;) === \u0026#34;light\u0026#34; // if current theme is light, then set comment widget\u0026#39;s theme to dark, otherwise light. ? \u0026#34;github-dark\u0026#34; : \u0026#34;github-light\u0026#34;, }; iframe?.contentWindow.postMessage(message, \u0026#34;https://utteranc.es\u0026#34;); }); \u0026lt;/script\u0026gt; {{- end }} PaperMod ä¼šå°†å½“å‰é¢œè‰²ä¸»é¢˜å­˜åœ¨ localStorage-\u0026gt;pref-theme ä¸‹\nå‚è€ƒ Adaptive dark theme Dynamic theme changing https://github.com/adityatelange/hugo-PaperMod\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","permalink":"https://blog.fissssssh.com/posts/integrate-utterances-in-hugo/","summary":"utterances æ˜¯åŸºäº GitHub issues æ„å»ºçš„è½»é‡çº§è¯„è®ºå°éƒ¨ä»¶ï¼Œé€šè¿‡æ­¤ç»„ä»¶å¯ä»¥å°† Github issues åº”ç”¨äºä»»ä½•ç½‘ç«™\nå‰ç½®æ¡ä»¶ ä¸€ä¸ªå…¬å¼€çš„ github repo åœ¨è¯¥ repo ä¸­å®‰è£…utterances app ç®€å•é›†æˆ æ‰“å¼€utteranceså®˜ç½‘\nåœ¨ configuration èŠ‚ç‚¹å¡«å†™ repo ä¿¡æ¯ç­‰ï¼Œå¡«å†™å¥½åä¼šç”Ÿæˆå¯¹åº”çš„ç»„ä»¶ä»£ç \næˆ‘ä½¿ç”¨çš„æ˜¯ PaperMod1 ä¸»é¢˜ï¼Œå°†ç”Ÿæˆå¥½çš„ä»£ç æ”¾å…¥layouts/partials/comments.html\n\u0026lt;!--layouts/partials/comments.html--\u0026gt; \u0026lt;script src=\u0026#34;https://utteranc.es/client.js\u0026#34; repo=\u0026#34;[ENTER REPO HERE]\u0026#34; issue-term=\u0026#34;pathname\u0026#34; theme=\u0026#34;github-light\u0026#34; label=\u0026#34;Comment\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; async \u0026gt;\u0026lt;/script\u0026gt; ç„¶ååœ¨config.yamlä¸­å¼€å¯è¯„è®ºåŠŸèƒ½å³å¯ç®€å•é›†æˆ\nparams: comments: true åŠ¨æ€ä¸»é¢˜é€‚é… PaperMod æœ‰æ˜äº®å’Œæš—é»‘ä¸¤ç§é¢œè‰²æ¨¡å¼ï¼Œè€Œ utterances çš„ä¸»é¢˜æ˜¯ç¼–ç æ—¶å°±å†™åœ¨scriptæ ‡ç­¾ä¸­çš„ï¼Œä¸ºäº†ä½¿ comments ç»„ä»¶çš„ä¸»é¢˜é€‚é… PaperMod é¢œè‰²ä¸»é¢˜ï¼Œæœ‰ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š\nä¸»é¢˜åŠ¨æ€åˆå§‹åŒ– \u0026lt;!-- layouts/partials/comments.html --\u0026gt; \u0026lt;script\u0026gt; (function () { let theme = localStorage.getItem(\u0026#34;pref-theme\u0026#34;); // already has prefer theme if (theme) { theme = theme === \u0026#34;dark\u0026#34; ?","title":"åœ¨ Hugo ä¸­é›†æˆ utterances è¯„è®ºç»„ä»¶"},{"content":"dapr åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªå¤šè¿›ç¨‹ç¨‹åºï¼Œå¯¹äº Visual Studio æ¥è¯´å¯èƒ½æ¯”è¾ƒå›°éš¾\nè¿™é‡Œä»‹ç»ä¸¤ç§æ–¹æ³•æ¥ä½¿ç”¨ Visual Studio è°ƒè¯• dapr åº”ç”¨ç¨‹åº\nä½¿ç”¨ VS æ‰©å±• é™„åŠ è¿›ç¨‹è°ƒè¯• ä½¿ç”¨ VS æ‰©å±• å‚è€ƒ https://github.com/dapr/dotnet-sdk/issues/401#issuecomment-747563695\nå‡†å¤‡æ¡ä»¶ å®‰è£… PowerShell 7 / Core ä¹Ÿå¯ä½¿ç”¨ dotnet tool install --global PowerShell è¿›è¡Œå®‰è£…\nå®‰è£… VS æ‰©å±• Microsoft Child Process Debugging Power Tool 2022 è°ƒè¯•å‡†å¤‡ ç¼–è¾‘launchSettings.json\n{ \u0026#34;$schema\u0026#34;: \u0026#34;https://json.schemastore.org/launchsettings.json\u0026#34;, \u0026#34;profiles\u0026#34;: { \u0026#34;WebApplication1\u0026#34;: { \u0026#34;commandName\u0026#34;: \u0026#34;Project\u0026#34;, \u0026#34;dotnetRunMessages\u0026#34;: true, \u0026#34;launchBrowser\u0026#34;: true, \u0026#34;launchUrl\u0026#34;: \u0026#34;weatherforecast\u0026#34;, \u0026#34;applicationUrl\u0026#34;: \u0026#34;http://localhost:5217\u0026#34;, \u0026#34;environmentVariables\u0026#34;: { \u0026#34;ASPNETCORE_ENVIRONMENT\u0026#34;: \u0026#34;Development\u0026#34; } }, \u0026#34;Dapr-PWSH\u0026#34;: { \u0026#34;commandName\u0026#34;: \u0026#34;Executable\u0026#34;, \u0026#34;executablePath\u0026#34;: \u0026#34;pwsh\u0026#34;, \u0026#34;commandLineArgs\u0026#34;: \u0026#34;-Command \\\u0026#34;dapr run -a myapp -p 5217 -- dotnet run --no-build\\\u0026#34;\u0026#34;, \u0026#34;workingDirectory\u0026#34;: \u0026#34;.\u0026#34;, \u0026#34;environmentVariables\u0026#34;: { \u0026#34;ASPNETCORE_ENVIRONMENT\u0026#34;: \u0026#34;Development\u0026#34; }, \u0026#34;nativeDebugging\u0026#34;: true } } } é…ç½®è°ƒè¯•æ’ä»¶\næ‰“å¼€ è°ƒè¯• -\u0026gt; å…¶ä»–è°ƒè¯•ç›®æ ‡ -\u0026gt; Child Process Debugging Settings...\nå¯ç”¨Enable child process debugging å¹¶è®¾ç½®è¡¨æ ¼å†…å®¹å¦‚ä¸‹\nEnabled Process name Action Debugger Type âœ… \u0026lt;All other processeses\u0026gt; Do not debug \u0026lt;Inherit from parent process\u0026gt; âœ… dapr.exe Attach debugger Native âœ… dotnet.exe Attach debugger Native âœ… \u0026lt;your_program\u0026gt;.exe Attach debugger Managed (.NET Core, .NET 5+) å¼€å§‹è°ƒè¯•\næ‰“ä¸Šæ–­ç‚¹ï¼Œå¯åŠ¨é…ç½®é€‰æ‹© Dapr-PWSHï¼ŒæŒ‰ä¸‹ F5 å³å¯ä½¿ç”¨ dapr å¯åŠ¨ç¨‹åºå¹¶è¿›è¡Œè°ƒè¯• ä½¿ç”¨ curl è°ƒç”¨ API çœ‹èƒ½å¦è¿›å…¥æ–­ç‚¹\ncurl http://localhost:5217/weatherforcast é€šè¿‡ Requeset.Headers.UserAgent å¯ä»¥çœ‹å‡ºæ­¤è¯·æ±‚æ¥æºæ˜¯ curl\nä½¿ç”¨ dapr CLI è°ƒç”¨çœ‹èƒ½å¦è¿›å…¥æ–­ç‚¹\ndapr invoke -a myapp -m weatherforcast -v GET dapr ä½¿ç”¨ go è¯­è¨€ç¼–å†™ï¼Œæ‰€ä»¥ Requeset.Headers.UserAgent æ˜¾ç¤º Go-http-client/1.1\næ­¤æ–¹æ³•è°ƒè¯•çš„ä¼˜ç‚¹æ˜¯ç®€å•ï¼Œéœ€è¦è°ƒè¯•æ—¶å€™æŒ‰ä¸‹ F5 å³å¯è°ƒè¯•ï¼Œå’Œæ™®é€šç¨‹åºè°ƒè¯•æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯æˆ‘æœ¬äººåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°æ­¤æ–¹æ³•è°ƒè¯•è¿‡ç¨‹æœ‰ç‚¹å¡é¡¿ï¼Œå…·ä½“åŸå› ä¸çŸ¥\né™„åŠ è¿›ç¨‹è°ƒè¯• æ­¤æ–¹æ³•åˆ™æ˜¯ä½¿ç”¨ VS è‡ªå¸¦çš„é™„åŠ è°ƒè¯•åŠŸèƒ½ï¼Œæ— éœ€å®‰è£…å¤šä½™çš„è½¯ä»¶å’Œæ‰©å±•\nä½¿ç”¨ dapr å¯åŠ¨ç¨‹åº\ndapr run -a myapp -p 5217 -- dotnet run é€šè¿‡èœå•æˆ–ä½¿ç”¨å¿«æ·é”® Ctrl+Alt+P æ‰“å¼€é™„åŠ è°ƒè¯•\né€‰æ‹©ç¨‹åºå¯¹åº”çš„è¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨æœç´¢çª—å£è¿›è¡Œè¿‡æ»¤\næ­¤æ—¶ Visual Studio å°±ä¼šè¿›å…¥è°ƒè¯•çŠ¶æ€ï¼Œé€šè¿‡ curl æˆ– dapr è°ƒç”¨ api éƒ½èƒ½è¿›å…¥æ–­ç‚¹\nå¦‚æœ VS å·²ç»é™„åŠ è¿‡è¿›ç¨‹ï¼Œå¯ä»¥é€šè¿‡ Shift+Alt+P å¿«é€Ÿé™„åŠ åˆ°ä¸Šä¸€æ¬¡é€‰æ‹©çš„åŒåè¿›ç¨‹\næ­¤æ–¹æ³•å’Œä½¿ç”¨ VS æ‰©å±•ç›¸æ¯”ï¼Œå¯åŠ¨å’Œè°ƒè¯•åˆ†æˆäº†ä¸¤ä¸ªæ“ä½œï¼Œåœ¨é¢å¯¹é¢‘ç¹çš„å¯åŠ¨è°ƒè¯•æ—¶å¯èƒ½æ¯”è¾ƒç¹çï¼Œä½†æ˜¯æˆ‘æœ¬äººç”¨æ­¤æ–¹æ³•è°ƒè¯•ä¸ä¼šæ„Ÿè§‰åˆ°å¡é¡¿\né™„åŠ è°ƒè¯•ä¸ä»…èƒ½è°ƒè¯• dapr åº”ç”¨ç¨‹åºï¼Œè¿˜æ”¯æŒè®¸å¤šæ›´å¤æ‚çš„è°ƒè¯•æ“ä½œ\n","permalink":"https://blog.fissssssh.com/posts/debug-program-start-by-dapr-with-visual-studio/","summary":"dapr åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªå¤šè¿›ç¨‹ç¨‹åºï¼Œå¯¹äº Visual Studio æ¥è¯´å¯èƒ½æ¯”è¾ƒå›°éš¾\nè¿™é‡Œä»‹ç»ä¸¤ç§æ–¹æ³•æ¥ä½¿ç”¨ Visual Studio è°ƒè¯• dapr åº”ç”¨ç¨‹åº\nä½¿ç”¨ VS æ‰©å±• é™„åŠ è¿›ç¨‹è°ƒè¯• ä½¿ç”¨ VS æ‰©å±• å‚è€ƒ https://github.com/dapr/dotnet-sdk/issues/401#issuecomment-747563695\nå‡†å¤‡æ¡ä»¶ å®‰è£… PowerShell 7 / Core ä¹Ÿå¯ä½¿ç”¨ dotnet tool install --global PowerShell è¿›è¡Œå®‰è£…\nå®‰è£… VS æ‰©å±• Microsoft Child Process Debugging Power Tool 2022 è°ƒè¯•å‡†å¤‡ ç¼–è¾‘launchSettings.json\n{ \u0026#34;$schema\u0026#34;: \u0026#34;https://json.schemastore.org/launchsettings.json\u0026#34;, \u0026#34;profiles\u0026#34;: { \u0026#34;WebApplication1\u0026#34;: { \u0026#34;commandName\u0026#34;: \u0026#34;Project\u0026#34;, \u0026#34;dotnetRunMessages\u0026#34;: true, \u0026#34;launchBrowser\u0026#34;: true, \u0026#34;launchUrl\u0026#34;: \u0026#34;weatherforecast\u0026#34;, \u0026#34;applicationUrl\u0026#34;: \u0026#34;http://localhost:5217\u0026#34;, \u0026#34;environmentVariables\u0026#34;: { \u0026#34;ASPNETCORE_ENVIRONMENT\u0026#34;: \u0026#34;Development\u0026#34; } }, \u0026#34;Dapr-PWSH\u0026#34;: { \u0026#34;commandName\u0026#34;: \u0026#34;Executable\u0026#34;, \u0026#34;executablePath\u0026#34;: \u0026#34;pwsh\u0026#34;, \u0026#34;commandLineArgs\u0026#34;: \u0026#34;-Command \\\u0026#34;dapr run -a myapp -p 5217 -- dotnet run --no-build\\\u0026#34;\u0026#34;, \u0026#34;workingDirectory\u0026#34;: \u0026#34;.","title":"ä½¿ç”¨ Visual Studio è°ƒè¯• dapr åº”ç”¨ç¨‹åº"},{"content":"å®šä¹‰ subpub ç»„ä»¶ æˆ‘ä»¬ä½¿ç”¨ Dapr åˆå§‹åŒ–æ—¶å®‰è£…çš„ redis ä½œä¸º pubsub çš„å®ç°\nåˆ›å»ºæ–‡ä»¶ ~/.dapr/components/pubsub.yaml ï¼ˆWindows ç”¨æˆ·ä¸º %USERPROFILE%\\.dapr\\components\\pubsub.yaml ï¼‰ï¼Œå†…å®¹å¦‚ä¸‹\nDapr åˆå§‹åŒ–å ~/.dapr/components æ–‡ä»¶å¤¹ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œé‡Œé¢æœ‰ä¸€ä¸ª statestore.yaml çš„ç»„ä»¶å®šä¹‰ã€‚å¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶å¤¹ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œæ‰‹åŠ¨åˆ›å»ºå³å¯\napiVersion: dapr.io/v1alpha1 kind: Component metadata: name: pubsub spec: type: pubsub.redis version: v1 metadata: - name: redisHost value: localhost:6379 - name: redisPassword value: \u0026#34;\u0026#34; åˆ›å»ºé¡¹ç›® åˆ›å»º ASP.NET Core WebAPI é¡¹ç›®\n$ dotnet new webapi --no-openapi --no-https å®‰è£… Dapr SDK\ndotnet CLI\n$ dotnet add package Dapr.AspNetCore ç¨‹åºåŒ…ç®¡ç†å™¨æ§åˆ¶å°\nInstall-Package Dapr.AspNetCore ä¹Ÿå¯ä»¥åœ¨ Visual Studio çš„ Nuget åŒ…ç®¡ç†å™¨ä¸­æœç´¢å®‰è£…\næ·»åŠ  Dapr æ”¯æŒåˆ° ASP.NET Core æ¡†æ¶\nProgram.cs\n- builder.Services.AddControllers(); + builder.Services.AddControllers().AddDapr(); app.MapControllers(); + app.MapSubscribeHandler(); æ·»åŠ æ¶ˆæ¯å¤„ç†ç¨‹åº\nPubSubController.cs\nusing Dapr; using Microsoft.AspNetCore.Mvc; namespace pubsub { public class PubSubController : ControllerBase { private readonly ILogger\u0026lt;PubSubController\u0026gt; _logger; public PubSubController(ILogger\u0026lt;PubSubController\u0026gt; logger) { _logger = logger; } [Topic(\u0026#34;pubsub\u0026#34;, \u0026#34;Test\u0026#34;)] [HttpPost(\u0026#34;test\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; SubscribeTest() { var sr = new StreamReader(HttpContext.Request.Body); var body = await sr.ReadToEndAsync(); _logger.LogInformation(\u0026#34;received cloud event from Test: {message}\u0026#34;, body); return Ok(); } } } ä½¿ç”¨ Dapr.AspNetCore æä¾›çš„ TopicAttribute å¯ä»¥æ–¹ä¾¿çš„è®¢é˜…ä¸»é¢˜å¹¶å…³è”åˆ° API æ¥å£ï¼Œå¿…é¡»åœ¨ç®¡é“ä¸­é…ç½® app.MapSubscribeHandler()ï¼Œ å¦åˆ™å³ä½¿æ ‡æ³¨äº† Topic ç‰¹æ€§ç¨‹åºä¹Ÿä¸ä¼šè®¢é˜…\nè®¢é˜…ä¸»é¢˜çš„æ¥å£å¿…é¡»è¿”å› HTTP 200 OK çŠ¶æ€ç ï¼Œå¦åˆ™ dapr å¯èƒ½ä¼šè§†ä¸ºæ¶ˆæ¯æ¨é€ä¸æˆåŠŸè€Œè¿›è¡Œé‡æ–°æ¨é€ï¼Œdapr çš„æ¶ˆæ¯æ¨é€è§„åˆ™ä¸º AtLeastOnceï¼Œå³è‡³å°‘ä¸€æ¬¡\næµ‹è¯•è®¢é˜… ä½¿ç”¨ dapr å¯åŠ¨ç¨‹åº\n$ dapr run --app-id pubsubtest --app-port 5265 -- dotnet run --app-port ä¸ºåº”ç”¨ç¨‹åºçš„ http ç«¯å£ï¼Œå¯¹äº ASP.NET Core å¼€å‘ç¯å¢ƒæ¥è¯´ï¼Œä¸€èˆ¬åœ¨ Properties/launchSettings.json ä¸­å¯ä»¥æ‰¾åˆ°\n--app-id ä¸ºåº”ç”¨ç¨‹åº idï¼ŒåŒä¸€ç»„åº”ç”¨ç¨‹åºç±»ä¼¼åœ¨å‘å¸ƒè®¢é˜…ä¸­ç±»ä¼¼æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆè´¹è€…ç»„ï¼Œå¦‚æœæœ‰å¤šä¸ªç¨‹åºçš„ app-id ç›¸åŒï¼Œåˆ™åªæœ‰ä¸€ä¸ªç¨‹åºå®ä¾‹èƒ½å¤Ÿæ”¶åˆ°æ¶ˆæ¯\nä½¿ç”¨ dapr æ¨¡æ‹Ÿå‘å¸ƒ\n$ dapr publish -i pubsubtest -p pubsub -t Test -d \u0026#39;{\u0026#34;data\u0026#34;:\u0026#34;this is a test message\u0026#34;}\u0026#39; Event published successfully è§‚å¯Ÿç¬¬ 1 æ­¥ä¸­ç¨‹åºçš„è¾“å‡º\n== APP == info: pubsub.PubSubController[0] == APP == received cloud event from Test: {\u0026#34;data\u0026#34;:{\u0026#34;data\u0026#34;:\u0026#34;this is a test message\u0026#34;},\u0026#34;datacontenttype\u0026#34;:\u0026#34;application/json\u0026#34;,\u0026#34;id\u0026#34;:\u0026#34;5d485363-1658-4771-8c25-a84615359dde\u0026#34;,\u0026#34;pubsubname\u0026#34;:\u0026#34;pubsub\u0026#34;,\u0026#34;source\u0026#34;:\u0026#34;pubsubtest\u0026#34;,\u0026#34;specversion\u0026#34;:\u0026#34;1.0\u0026#34;,\u0026#34;time\u0026#34;:\u0026#34;2022-12-15T01:17:10+08:00\u0026#34;,\u0026#34;topic\u0026#34;:\u0026#34;Test\u0026#34;,\u0026#34;traceid\u0026#34;:\u0026#34;00-363f742582302ed141396ce408dbacc0-4b6f5751d4039d75-01\u0026#34;,\u0026#34;traceparent\u0026#34;:\u0026#34;00-363f742582302ed141396ce408dbacc0-4b6f5751d4039d75-01\u0026#34;,\u0026#34;tracestate\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;com.dapr.event.sent\u0026#34;} å¯ä»¥å‘ç°æ”¶åˆ°çš„æ•°æ®æ˜¯ä¸€ä¸ª JSON æ ¼å¼æ•°æ®ï¼Œ å…¶ä¸­ data å­—æ®µæ­£æ˜¯æˆ‘ä»¬å®é™…å‘é€çš„å†…å®¹\n{ \u0026#34;data\u0026#34;: { \u0026#34;data\u0026#34;: \u0026#34;this is a test message\u0026#34; }, \u0026#34;datacontenttype\u0026#34;: \u0026#34;application/json\u0026#34;, \u0026#34;id\u0026#34;: \u0026#34;5d485363-1658-4771-8c25-a84615359dde\u0026#34;, \u0026#34;pubsubname\u0026#34;: \u0026#34;pubsub\u0026#34;, \u0026#34;source\u0026#34;: \u0026#34;pubsubtest\u0026#34;, \u0026#34;specversion\u0026#34;: \u0026#34;1.0\u0026#34;, \u0026#34;time\u0026#34;: \u0026#34;2022-12-15T01:17:10+08:00\u0026#34;, \u0026#34;topic\u0026#34;: \u0026#34;Test\u0026#34;, \u0026#34;traceid\u0026#34;: \u0026#34;00-363f742582302ed141396ce408dbacc0-4b6f5751d4039d75-01\u0026#34;, \u0026#34;traceparent\u0026#34;: \u0026#34;00-363f742582302ed141396ce408dbacc0-4b6f5751d4039d75-01\u0026#34;, \u0026#34;tracestate\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;com.dapr.event.sent\u0026#34; } è¿™ç§æ•°æ®æ ¼å¼åœ¨ dapr ä¸­ç§°ä¸º CloudEventï¼Œå®ƒè®°å½•äº†å‘é€çš„å†…å®¹ï¼Œç±»å‹ï¼Œä¸»é¢˜å’Œå…¶ä»–å…ƒä¿¡æ¯ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬åªéœ€è¦ data å­—æ®µçš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡åœ¨ ASP.NET Core ç®¡é“ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç æ¥å¯¹ CloudEvent æ¶ˆæ¯è§£åŒ…ï¼š\n+ app.UseCloudEvents(); app.MapControllers(); app.MapSubscribeHandler(); ä¿®æ”¹ä»£ç åé‡æ–°å¯åŠ¨ç¨‹åºå¹¶å‘å¸ƒæµ‹è¯•æ¶ˆæ¯ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°ä»¥ä¸‹è¾“å‡º\n== APP == info: pubsub.PubSubController[0] == APP == received cloud event from Test: {\u0026#34;data\u0026#34;:\u0026#34;this is a test message\u0026#34;} å®é™…æƒ…å†µä¸­ä¸éœ€è¦è‡ªå·±ä» HttpContext.Request.Body ä¸­è¯»å–æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ ASP.NET Core çš„æ¨¡å‹ç»‘å®šæ¥åš\næµ‹è¯•å‘å¸ƒ ä¿®æ”¹ç°æœ‰ä»£ç \nprivate readonly ILogger\u0026lt;PubSubController\u0026gt; _logger; + private readonly DaprClient _daprClient; - public PubSubController(ILogger\u0026lt;PubSubController\u0026gt; logger) + public PubSubController(ILogger\u0026lt;PubSubController\u0026gt; logger, DaprClient daprClient) { _logger = logger; + _daprClient = daprClient; } + [HttpPost(\u0026#34;pub\u0026#34;)] + public async Task\u0026lt;IActionResult\u0026gt; PublishTest() + { + await _daprClient.PublishEventAsync(\u0026#34;pubsub\u0026#34;, \u0026#34;Test\u0026#34;, new { data = \u0026#34;this is a test publish message\u0026#34; }); + return Ok(); + } è°ƒç”¨å‘å¸ƒæ¶ˆæ¯çš„ API æ¥å£\n$ curl -XPOST http://localhost:5265/pub è§‚å¯Ÿç¨‹åºè¾“å‡º\n== APP == info: pubsub.PubSubController[0] == APP == received cloud event from Test: {\u0026#34;data\u0026#34;:\u0026#34;this is a test publish message\u0026#34;} è°ƒç”¨å‘å¸ƒ API åï¼Œç¨‹åºå‘å¸ƒäº†æ¶ˆæ¯åˆ° pubsub ç»„ä»¶çš„ Test ç»„ä»¶ï¼Œè€Œæˆ‘ä»¬çš„ç¨‹åºåˆè®¢é˜…äº†è¿™ä¸ªä¸»é¢˜ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡ºæˆ‘ä»¬å‘å¸ƒå‡ºå»çš„æ¶ˆæ¯\n","permalink":"https://blog.fissssssh.com/posts/dapr-publish-and-subscription-in-asp-net-core/","summary":"å®šä¹‰ subpub ç»„ä»¶ æˆ‘ä»¬ä½¿ç”¨ Dapr åˆå§‹åŒ–æ—¶å®‰è£…çš„ redis ä½œä¸º pubsub çš„å®ç°\nåˆ›å»ºæ–‡ä»¶ ~/.dapr/components/pubsub.yaml ï¼ˆWindows ç”¨æˆ·ä¸º %USERPROFILE%\\.dapr\\components\\pubsub.yaml ï¼‰ï¼Œå†…å®¹å¦‚ä¸‹\nDapr åˆå§‹åŒ–å ~/.dapr/components æ–‡ä»¶å¤¹ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œé‡Œé¢æœ‰ä¸€ä¸ª statestore.yaml çš„ç»„ä»¶å®šä¹‰ã€‚å¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶å¤¹ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œæ‰‹åŠ¨åˆ›å»ºå³å¯\napiVersion: dapr.io/v1alpha1 kind: Component metadata: name: pubsub spec: type: pubsub.redis version: v1 metadata: - name: redisHost value: localhost:6379 - name: redisPassword value: \u0026#34;\u0026#34; åˆ›å»ºé¡¹ç›® åˆ›å»º ASP.NET Core WebAPI é¡¹ç›®\n$ dotnet new webapi --no-openapi --no-https å®‰è£… Dapr SDK\ndotnet CLI\n$ dotnet add package Dapr.AspNetCore ç¨‹åºåŒ…ç®¡ç†å™¨æ§åˆ¶å°\nInstall-Package Dapr.AspNetCore ä¹Ÿå¯ä»¥åœ¨ Visual Studio çš„ Nuget åŒ…ç®¡ç†å™¨ä¸­æœç´¢å®‰è£…","title":"ASP.NET Core ä¸­ä½¿ç”¨ Dapr å‘å¸ƒè®¢é˜…"},{"content":"å‰ç½®æ¡ä»¶ Dapr å¯ä»¥è„±ç¦» Docker è¿è¡Œï¼Œä½†ä¸åœ¨æœ¬ç¯‡æ‰€è®²èŒƒå›´å†…ï¼Œæœ¬ç¯‡å†…å®¹ä¸­çš„æ“ä½œéƒ½æ˜¯åŸºäº Docker å®‰è£…å®Œæˆå¹¶è¿è¡Œæ­£å¸¸çš„æƒ…å†µä¸‹çš„æ“ä½œ\nDocker Docker å®‰è£…å®˜æ–¹æ–‡æ¡£æè¿°ååˆ†æ¸…æ™°ã€‚ Windows ç”¨æˆ·æ¨èå®‰è£…å¸¦ç•Œé¢çš„ Docker Desktopï¼ˆæ›´ç¬¦åˆ Windows äººçš„æ“ä½œä¹ æƒ¯å§ï¼‰ï¼ŒLinux ç”¨æˆ·å®‰è£… Docker Engine å³å¯ã€‚\nå¼€å§‹å®‰è£… Dapr çš„å®‰è£…åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š\nå®‰è£… Dapr CLI å®‰è£… Dapr Runtime æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è¿›è¡Œå®‰è£…ï¼Œåœ¨çº¿å®‰è£…æ–¹å¼ä¼šå» github ä¸‹è½½å¯¹åº”çš„èµ„æºï¼Œç½‘ç»œä¸å¥½çš„åŒå­¦å¯ä»¥ä½¿ç”¨ç¦»çº¿å®‰è£…çš„æ–¹å¼\nåœ¨çº¿å®‰è£… å®‰è£… Dapr CLI\nDapr å®˜ç½‘æœ‰å„ä¸ªæ“ä½œç³»ç»Ÿè¯¦ç»†çš„å®‰è£…æ–¹æ³•ï¼Œè¿™é‡Œè®²ä¸€ä¸‹é€šç”¨çš„äºŒè¿›åˆ¶å®‰è£…æ–¹æ³•ï¼š\né¦–å…ˆå» Dapr CLI çš„å‘å¸ƒé¡µï¼ˆç›®å‰æœ€æ–°æ˜¯ 1.9.1 ç‰ˆæœ¬ï¼‰ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿç‰ˆæœ¬çš„å‹ç¼©åŒ…ï¼Œå‘½åæ ¼å¼ä¸ºdapr_\u0026lt;os_name\u0026gt;_\u0026lt;cpu_arch\u0026gt;.(tar.gz|zip)ï¼Œå¦‚æœæ“ä½œç³»ç»Ÿæˆ–è€… CPU æ¶æ„æ²¡é€‰å¯¹ï¼Œåˆ™ Dapr CLI æ— æ³•æ­£å¸¸è¿è¡Œ é€šå¸¸æ¥è¯´ Windows ç”¨æˆ·ä¸‹è½½dapr_windows_amd64.zipï¼ŒLinux ç”¨æˆ·ä¸‹è½½dapr_linux_amd64.tar.gz\nè§£å‹åˆ°ä»»æ„æ–‡ä»¶å¤¹ï¼Œå¹¶å°†è¯¥æ–‡ä»¶å¤¹è·¯å¾„åŠ å…¥PATHç¯å¢ƒå˜é‡ Linux ç”¨æˆ·å¯ç›´æ¥åˆ›å»ºè½¯è¿æ¥åˆ°/usr/local/bin/daprï¼Œ Windows ç”¨æˆ·æ¨èå°†æ–‡ä»¶è§£å‹è‡³%USERPROFILE%\\bin\\æ–‡ä»¶å¤¹ï¼Œå¹¶å°†%USERPROFILE%\\bin\\æ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­ï¼Œåç»­æœ‰å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶ä¹Ÿå¯ä»¥æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œä¸ç”¨å†åŠ¨ç¯å¢ƒå˜é‡\næ‰“å¼€æ§åˆ¶å°æˆ–è€…ç»ˆç«¯è¾“å…¥daprï¼Œå¦‚æœæœ‰ç›¸å…³çš„å†…å®¹è¾“å‡ºåˆ™å®‰è£…æˆåŠŸ å®‰è£… Dapr Runtime\nå®‰è£… Dapr Runtime ä¹Ÿå«åˆå§‹åŒ– Daprã€‚\næœ¬åœ° Dapr ç¯å¢ƒçš„åˆå§‹åŒ–å¾ˆç®€å•ï¼Œ åªéœ€è¦dapr initå³å¯\nç¦»çº¿å®‰è£… ä¸‹è½½Dapr Install-Bundleï¼Œä¸‹è½½æ–‡ä»¶çš„é€‰æ‹©åŒ Dapr CLI\nè§£å‹ï¼Œå¹¶å°† daprbundle/daprï¼ˆdapr.exeï¼‰ç§»åŠ¨åˆ°å¯æ‰§è¡Œæ–‡ä»¶å¤¹ä¸‹ï¼ˆå‚è€ƒåœ¨çº¿å®‰è£…ä¸­å®‰è£… Dapr CLI çš„ç¬¬ 2 æ­¥ï¼‰\nç§»åŠ¨åˆ° daprbundle æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ dapr init --from-dir .\nç¦»çº¿å®‰è£…ä¸ä¼šå®‰è£… zipkin å’Œ redisï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤è¿›è¡Œå®‰è£…\n$ docker run --name \u0026#34;dapr_zipkin\u0026#34; --restart always -d -p 9411:9411 openzipkin/zipkin $ docker run --name \u0026#34;dapr_redis\u0026#34; --restart always -d -p 6379:6379 redislabs/rejson éªŒè¯ æ‰“å¼€æ§åˆ¶å°æˆ–ç»ˆç«¯è¾“å…¥dapr versionï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…çš„ç‰ˆæœ¬\n$ dapr version CLI version: 1.9.1 Runtime version: 1.9.5 å¦‚æœå‡ºç°ä¸Šè¿°å†…å®¹ï¼Œæ­å–œæ‚¨ï¼Œæ‚¨å·²ç»æˆåŠŸå®‰è£…æœ¬åœ° dapr ç¯å¢ƒï¼\n","permalink":"https://blog.fissssssh.com/posts/dapr/install/","summary":"å‰ç½®æ¡ä»¶ Dapr å¯ä»¥è„±ç¦» Docker è¿è¡Œï¼Œä½†ä¸åœ¨æœ¬ç¯‡æ‰€è®²èŒƒå›´å†…ï¼Œæœ¬ç¯‡å†…å®¹ä¸­çš„æ“ä½œéƒ½æ˜¯åŸºäº Docker å®‰è£…å®Œæˆå¹¶è¿è¡Œæ­£å¸¸çš„æƒ…å†µä¸‹çš„æ“ä½œ\nDocker Docker å®‰è£…å®˜æ–¹æ–‡æ¡£æè¿°ååˆ†æ¸…æ™°ã€‚ Windows ç”¨æˆ·æ¨èå®‰è£…å¸¦ç•Œé¢çš„ Docker Desktopï¼ˆæ›´ç¬¦åˆ Windows äººçš„æ“ä½œä¹ æƒ¯å§ï¼‰ï¼ŒLinux ç”¨æˆ·å®‰è£… Docker Engine å³å¯ã€‚\nå¼€å§‹å®‰è£… Dapr çš„å®‰è£…åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š\nå®‰è£… Dapr CLI å®‰è£… Dapr Runtime æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è¿›è¡Œå®‰è£…ï¼Œåœ¨çº¿å®‰è£…æ–¹å¼ä¼šå» github ä¸‹è½½å¯¹åº”çš„èµ„æºï¼Œç½‘ç»œä¸å¥½çš„åŒå­¦å¯ä»¥ä½¿ç”¨ç¦»çº¿å®‰è£…çš„æ–¹å¼\nåœ¨çº¿å®‰è£… å®‰è£… Dapr CLI\nDapr å®˜ç½‘æœ‰å„ä¸ªæ“ä½œç³»ç»Ÿè¯¦ç»†çš„å®‰è£…æ–¹æ³•ï¼Œè¿™é‡Œè®²ä¸€ä¸‹é€šç”¨çš„äºŒè¿›åˆ¶å®‰è£…æ–¹æ³•ï¼š\né¦–å…ˆå» Dapr CLI çš„å‘å¸ƒé¡µï¼ˆç›®å‰æœ€æ–°æ˜¯ 1.9.1 ç‰ˆæœ¬ï¼‰ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿç‰ˆæœ¬çš„å‹ç¼©åŒ…ï¼Œå‘½åæ ¼å¼ä¸ºdapr_\u0026lt;os_name\u0026gt;_\u0026lt;cpu_arch\u0026gt;.(tar.gz|zip)ï¼Œå¦‚æœæ“ä½œç³»ç»Ÿæˆ–è€… CPU æ¶æ„æ²¡é€‰å¯¹ï¼Œåˆ™ Dapr CLI æ— æ³•æ­£å¸¸è¿è¡Œ é€šå¸¸æ¥è¯´ Windows ç”¨æˆ·ä¸‹è½½dapr_windows_amd64.zipï¼ŒLinux ç”¨æˆ·ä¸‹è½½dapr_linux_amd64.tar.gz\nè§£å‹åˆ°ä»»æ„æ–‡ä»¶å¤¹ï¼Œå¹¶å°†è¯¥æ–‡ä»¶å¤¹è·¯å¾„åŠ å…¥PATHç¯å¢ƒå˜é‡ Linux ç”¨æˆ·å¯ç›´æ¥åˆ›å»ºè½¯è¿æ¥åˆ°/usr/local/bin/daprï¼Œ Windows ç”¨æˆ·æ¨èå°†æ–‡ä»¶è§£å‹è‡³%USERPROFILE%\\bin\\æ–‡ä»¶å¤¹ï¼Œå¹¶å°†%USERPROFILE%\\bin\\æ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­ï¼Œåç»­æœ‰å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶ä¹Ÿå¯ä»¥æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œä¸ç”¨å†åŠ¨ç¯å¢ƒå˜é‡\næ‰“å¼€æ§åˆ¶å°æˆ–è€…ç»ˆç«¯è¾“å…¥daprï¼Œå¦‚æœæœ‰ç›¸å…³çš„å†…å®¹è¾“å‡ºåˆ™å®‰è£…æˆåŠŸ å®‰è£… Dapr Runtime\nå®‰è£… Dapr Runtime ä¹Ÿå«åˆå§‹åŒ– Daprã€‚\næœ¬åœ° Dapr ç¯å¢ƒçš„åˆå§‹åŒ–å¾ˆç®€å•ï¼Œ åªéœ€è¦dapr initå³å¯","title":"å®‰è£… Dapr"},{"content":"å¼•è¨€ æ’ä»¶å¯ä»¥æé«˜å¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›ï¼Œå¥½çš„æ’ä»¶å¯ä»¥è®©å¼€å‘äº‹åŠåŠŸå€ï¼Œä¸‹é¢æ¨èä¸€äº›è‡ªå·±ç”¨çš„ Visual Studio æ’ä»¶ï¼ˆå…è´¹ï¼ï¼‰\næ’ä»¶åˆ—è¡¨ ä»¥ä¸‹æ‰€æœ‰æ’ä»¶åœ¨ Visual Studio 2022 è¿è¡Œæ­£å¸¸ï¼Œè‹¥ç‰ˆæœ¬ä¸å…¼å®¹è¯·ç§»æ­¥ Visual Studio Marketplace æŸ¥çœ‹æ˜¯å¦æœ‰å¯¹åº”ç‰ˆæœ¬\næ’ä»¶åç§° æè¿° CodeMaid VS2022 ä»£ç æ¸…ç†æ’ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç é”¹çª—å£æ·±å¾—æˆ‘å¿ƒ Output enhancer è¾“å‡ºçª—å£ä½¿ç”¨å½©è‰²ä¼˜åŒ–ï¼Œé”™è¯¯ä¸ºçº¢è‰²ï¼Œè­¦å‘Šä¸ºé»„è‰²ç­‰ Code alignment ä»£ç å¯¹é½ï¼Œè®©ä½ çš„æŸäº›ä»£ç æŒ‰ç…§æŸä¸ªå­—ç¬¦å‚ç›´å¯¹é½ Double-Click Maximize 2022 åŒå‡»æœ€å¤§åŒ–ï¼Œä¸ç”¨å…ˆæ‹–å‡ºæ¥å†æ”¾å¤§ï¼Œå†æ¬¡åŒå‡»å³å¯å›å½’åŸä½ Time Stamp Margin 2022 åœ¨è°ƒè¯•çª—å£å·¦è¾¹å¢åŠ ä¸€åˆ—æ—¶é—´æˆ³ Shrink Empty Lines 2022 å‹ç¼©ç©ºè¡Œå’Œæ²¡æœ‰å­—ç¬¦çš„è¡Œï¼ˆåªæœ‰æ‹¬å·çš„è¡Œï¼‰çš„é«˜åº¦ï¼Œä»è€Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ›´å¤šä»£ç  Solution Error Visualizer 2022 å½“æŸä¸ªæ–‡ä»¶æœ‰é”™è¯¯æˆ–è€…è­¦å‘Šæ—¶ï¼Œåœ¨è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤ºï¼ˆå…¶çˆ¶ç›®å½•ä¹Ÿä¼šæ˜¾ç¤ºï¼‰ Match Margin 2022 åœ¨æ»šåŠ¨æ¡ä¸Šæ˜¾ç¤ºå½“å‰é€‰ä¸­å•è¯çš„ä½ç½® ","permalink":"https://blog.fissssssh.com/posts/recommended-visual-studio-plugins/","summary":"å¼•è¨€ æ’ä»¶å¯ä»¥æé«˜å¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›ï¼Œå¥½çš„æ’ä»¶å¯ä»¥è®©å¼€å‘äº‹åŠåŠŸå€ï¼Œä¸‹é¢æ¨èä¸€äº›è‡ªå·±ç”¨çš„ Visual Studio æ’ä»¶ï¼ˆå…è´¹ï¼ï¼‰\næ’ä»¶åˆ—è¡¨ ä»¥ä¸‹æ‰€æœ‰æ’ä»¶åœ¨ Visual Studio 2022 è¿è¡Œæ­£å¸¸ï¼Œè‹¥ç‰ˆæœ¬ä¸å…¼å®¹è¯·ç§»æ­¥ Visual Studio Marketplace æŸ¥çœ‹æ˜¯å¦æœ‰å¯¹åº”ç‰ˆæœ¬\næ’ä»¶åç§° æè¿° CodeMaid VS2022 ä»£ç æ¸…ç†æ’ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç é”¹çª—å£æ·±å¾—æˆ‘å¿ƒ Output enhancer è¾“å‡ºçª—å£ä½¿ç”¨å½©è‰²ä¼˜åŒ–ï¼Œé”™è¯¯ä¸ºçº¢è‰²ï¼Œè­¦å‘Šä¸ºé»„è‰²ç­‰ Code alignment ä»£ç å¯¹é½ï¼Œè®©ä½ çš„æŸäº›ä»£ç æŒ‰ç…§æŸä¸ªå­—ç¬¦å‚ç›´å¯¹é½ Double-Click Maximize 2022 åŒå‡»æœ€å¤§åŒ–ï¼Œä¸ç”¨å…ˆæ‹–å‡ºæ¥å†æ”¾å¤§ï¼Œå†æ¬¡åŒå‡»å³å¯å›å½’åŸä½ Time Stamp Margin 2022 åœ¨è°ƒè¯•çª—å£å·¦è¾¹å¢åŠ ä¸€åˆ—æ—¶é—´æˆ³ Shrink Empty Lines 2022 å‹ç¼©ç©ºè¡Œå’Œæ²¡æœ‰å­—ç¬¦çš„è¡Œï¼ˆåªæœ‰æ‹¬å·çš„è¡Œï¼‰çš„é«˜åº¦ï¼Œä»è€Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ›´å¤šä»£ç  Solution Error Visualizer 2022 å½“æŸä¸ªæ–‡ä»¶æœ‰é”™è¯¯æˆ–è€…è­¦å‘Šæ—¶ï¼Œåœ¨è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤ºï¼ˆå…¶çˆ¶ç›®å½•ä¹Ÿä¼šæ˜¾ç¤ºï¼‰ Match Margin 2022 åœ¨æ»šåŠ¨æ¡ä¸Šæ˜¾ç¤ºå½“å‰é€‰ä¸­å•è¯çš„ä½ç½® ","title":"Visual Studio 2022 æ’ä»¶æ¨è"},{"content":"å¼•è¨€ æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½æƒ³åœ¨æ¥å£ä¸­å¼€å¯ä¸€ä¸ªåå°ä»»åŠ¡ï¼Œå°±åƒè¿™æ ·:\npublic class MyController : Controller { private readonly MyDependency _dep; public MyController(MyDependency d) { _dep = d; } public IActionResult MyAction() { Task.Run(() =\u0026gt; _dep.DoHeavyAsyncWork()); return Json(\u0026#34;Your job is started!\u0026#34;); } } äº‹å®ä¸Šï¼Œè¿™æ®µä»£ç å¾ˆç¬¦åˆè¯­ä¹‰ï¼Œæ¥å£ä¹Ÿèƒ½æˆåŠŸè¿”å›ã€‚ ä½†æ˜¯å…¶ä¸­æœ‰ä¸€ä¸ªæ½œåœ¨é—®é¢˜ï¼Œéšç€returnè¯­å¥å“åº”æœ¬æ¬¡è¯·æ±‚ï¼ŒASP.NET Coreä¼šå¼€å§‹é‡Šæ”¾æœ¬æ¬¡è¯·æ±‚çš„ä¾èµ–ï¼Œæ¯”å¦‚æ§åˆ¶å™¨å’Œæ§åˆ¶å™¨ä¾èµ–çš„å„ç§æœåŠ¡â€¦â€¦ï¼Œè¿™å°±ä¼šå¯¼è‡´Task.Runè¯­å¥ä¸­çš„æ‰€ä¾èµ–çš„å®šä¹‰åœ¨æ§åˆ¶å™¨ä¸­çš„æœåŠ¡ä¼šè¢«é‡Šæ”¾æ‰ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æœªçŸ¥çš„é—®é¢˜ã€‚è¿™äº›æ½œåœ¨é—®é¢˜å¯èƒ½ä¼šè®©ä½ çš„åº”ç”¨ç¨‹åºéšæ—¶çˆ†ç‚¸ï¼\nè®©åå°ä»»åŠ¡æ‹¥æœ‰è‡ªå·±çš„ç”Ÿå­˜æœŸ ä¸ºäº†ä¿è¯åå°æœåŠ¡çš„ä¾èµ–ä¸éšæ§åˆ¶å™¨é‡Šæ”¾è€Œé‡Šæ”¾ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„æœåŠ¡å¹¶å°†å…¶æ³¨å†Œä¸ºå•ä¾‹æœåŠ¡ï¼Œå› ä¸ºå•ä¾‹æœåŠ¡æ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚\nåˆ›å»ºä¸€ä¸ªåä¸ºCannonServiceçš„ç±»\nCannonService.cs\npublic class CannonService { private readonly ILogger\u0026lt;CannonService\u0026gt; _logger; private readonly IServiceProvider _serviceProvider; public CannonService(ILogger\u0026lt;CannonService\u0026gt; logger, IServiceProvider serviceProvider) { _logger = logger; _serviceProvider = serviceProvider; } public void Fire(Delegate dg, Action\u0026lt;Exception\u0026gt;? exceptionHandler = null) { if (dg == null) { return; } Task.Run(async () =\u0026gt; { // é€šè¿‡åå°„è·å–å§”æ‰˜çš„å‚æ•°åˆ—è¡¨ var parameterTypes = dg.Method.GetParameters().Select(x =\u0026gt; x.ParameterType).ToArray(); var parameters = ArrayPool\u0026lt;object\u0026gt;.Shared.Rent(parameterTypes.Length); try { // åˆ›å»ºä¸€ä¸ªscope using var scope = _serviceProvider.CreateScope(); // è·å–å§”æ‰˜çš„å‚æ•°å®ä¾‹ for (var i = 0; i \u0026lt; parameterTypes.Length; i++) { var t = parameterTypes[i]; parameters[i] = scope.ServiceProvider.GetRequiredService(t); } // åˆ¤æ–­å§”æ‰˜æ˜¯æ˜¯å¼‚æ­¥è¿˜æ˜¯åŒæ­¥ var returnType = dg.Method.ReturnType; if (returnType.IsAssignableTo(typeof(Task))) { await (Task)dg.DynamicInvoke(parameters.Take(parameterTypes.Length).ToArray())!; } else { dg.DynamicInvoke(parameters.Take(parameterTypes.Length).ToArray()); } } catch (Exception e) { _logger.LogError(e, \u0026#34;Fire boom!\u0026#34;); exceptionHandler?.Invoke(e); } finally { ArrayPool\u0026lt;object\u0026gt;.Shared.Return(parameters, true); } }); } } å°†CannonServiceæ³¨å†Œä¸ºå•ä¾‹æœåŠ¡ Program.cs\nbuilder.Services.AddSingleton\u0026lt;CannonService\u0026gt;(); åœ¨éœ€è¦çš„åœ°æ–¹æ³¨å…¥è¯¥æœåŠ¡å¹¶ä½¿ç”¨\nè§¦å‘åŒæ­¥æ–¹æ³•\n_cannonService.Fire((SomeService someService) =\u0026gt; { someService.From = nameof(CannonService); someService.DoSomething(); }); è§¦å‘å¼‚æ­¥æ–¹æ³•\n_cannonService.Fire(async (SomeService someService) =\u0026gt; { someService.From = nameof(CannonService); await Task.Delay(timeout); someService.DoSomething(); }); ç¤ºä¾‹ SomeService.cs\nnamespace RunTaskInBackground.Demo { public class SomeService : IDisposable { private readonly ILogger\u0026lt;SomeService\u0026gt; _logger; private bool disposedValue; public string From { get; set; } = null!; public SomeService(ILogger\u0026lt;SomeService\u0026gt; logger) { _logger = logger; } public void DoSomething() { CheckIfClosedThrowDisposed(); _logger.LogInformation(\u0026#34;æˆ‘ä»{From}æ¥çš„ï¼Œæˆ‘åœ¨å¹²æ´»ï¼\u0026#34;, From); } void CheckIfClosedThrowDisposed() { if (disposedValue) throw new ObjectDisposedException(null, \u0026#34;æˆ‘æ­‡é€¼äº†ï¼Œåˆ«å«æˆ‘ï¼\u0026#34;); } protected virtual void Dispose(bool disposing) { if (!disposedValue) { if (disposing) { if (!string.IsNullOrEmpty(From)) { _logger.LogInformation(\u0026#34;æˆ‘ä»{From}æ¥çš„ï¼Œæˆ‘æ­‡é€¼äº†ï¼\u0026#34;, From); } else { _logger.LogInformation(\u0026#34;æˆ‘æ²¡æœ‰ğŸï¼Œæˆ‘æ­‡é€¼äº†ï¼\u0026#34;); } } disposedValue = true; } } public void Dispose() { Dispose(disposing: true); GC.SuppressFinalize(this); } } } Program.cs\nusing RunTaskInBackground.Demo; var builder = WebApplication.CreateBuilder(args); // Add services to the container. builder.Services.AddControllers(); // Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle builder.Services.AddEndpointsApiExplorer(); builder.Services.AddSwaggerGen(); builder.Services.AddSingleton\u0026lt;CannonService\u0026gt;(); builder.Services.AddScoped\u0026lt;SomeService\u0026gt;(); var app = builder.Build(); // Configure the HTTP request pipeline. if (app.Environment.IsDevelopment()) { app.UseSwagger(); app.UseSwaggerUI(); } app.UseAuthorization(); app.MapControllers(); app.Run(); HomeController.cs\nusing Microsoft.AspNetCore.Mvc; namespace RunTaskInBackground.Demo.Controllers { [ApiController] [Route(\u0026#34;[controller]\u0026#34;)] public class HomeController : ControllerBase { private readonly ILogger\u0026lt;HomeController\u0026gt; _logger; private readonly CannonService _cannonService; private readonly SomeService _someService; public HomeController(ILogger\u0026lt;HomeController\u0026gt; logger, CannonService cannonService, SomeService someService) { _logger = logger; _cannonService = cannonService; _someService = someService; _someService.From = nameof(HomeController); } [HttpGet] [Route(\u0026#34;Async\u0026#34;)] public IActionResult RunAsync(int timeout = 1000) { _cannonService.Fire(async (SomeService someService) =\u0026gt; { someService.From = nameof(CannonService); await Task.Delay(timeout); someService.DoSomething(); }); return Ok(); } [HttpGet] [Route(\u0026#34;AsyncBoom\u0026#34;)] public IActionResult RunAsyncBoom(int timeout = 1000) { _cannonService.Fire(async () =\u0026gt; { await Task.Delay(timeout); _someService.DoSomething(); }); return Ok(); } [HttpGet] [Route(\u0026#34;Sync\u0026#34;)] public IActionResult RunSync() { _cannonService.Fire((SomeService someService) =\u0026gt; { someService.From = nameof(CannonService); someService.DoSomething(); }); return Ok(); } } } åœ¨ swagger ä¸­åˆ†åˆ«è°ƒç”¨ Syncï¼ŒAsyncï¼ŒAsyncBoom æ¥å£ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\né™„å®Œæ•´ Demo åœ°å€\nå‚è€ƒ Anduin Xue.Fire and forget in ASP.NET Core with dependency alive[EB/OL].(2020-10-14)[2022-06-27].https://anduin.aiursoft.com/post/2020/10/14/fire-and-forget-in-aspnet-core-with-dependency-alive æœ¬ä½œå“é‡‡ç”¨ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®è®¸å¯\n","permalink":"https://blog.fissssssh.com/posts/how-to-start-backgroud-task-in-asp_net_core_webapi/","summary":"å¼•è¨€ æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½æƒ³åœ¨æ¥å£ä¸­å¼€å¯ä¸€ä¸ªåå°ä»»åŠ¡ï¼Œå°±åƒè¿™æ ·:\npublic class MyController : Controller { private readonly MyDependency _dep; public MyController(MyDependency d) { _dep = d; } public IActionResult MyAction() { Task.Run(() =\u0026gt; _dep.DoHeavyAsyncWork()); return Json(\u0026#34;Your job is started!\u0026#34;); } } äº‹å®ä¸Šï¼Œè¿™æ®µä»£ç å¾ˆç¬¦åˆè¯­ä¹‰ï¼Œæ¥å£ä¹Ÿèƒ½æˆåŠŸè¿”å›ã€‚ ä½†æ˜¯å…¶ä¸­æœ‰ä¸€ä¸ªæ½œåœ¨é—®é¢˜ï¼Œéšç€returnè¯­å¥å“åº”æœ¬æ¬¡è¯·æ±‚ï¼ŒASP.NET Coreä¼šå¼€å§‹é‡Šæ”¾æœ¬æ¬¡è¯·æ±‚çš„ä¾èµ–ï¼Œæ¯”å¦‚æ§åˆ¶å™¨å’Œæ§åˆ¶å™¨ä¾èµ–çš„å„ç§æœåŠ¡â€¦â€¦ï¼Œè¿™å°±ä¼šå¯¼è‡´Task.Runè¯­å¥ä¸­çš„æ‰€ä¾èµ–çš„å®šä¹‰åœ¨æ§åˆ¶å™¨ä¸­çš„æœåŠ¡ä¼šè¢«é‡Šæ”¾æ‰ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æœªçŸ¥çš„é—®é¢˜ã€‚è¿™äº›æ½œåœ¨é—®é¢˜å¯èƒ½ä¼šè®©ä½ çš„åº”ç”¨ç¨‹åºéšæ—¶çˆ†ç‚¸ï¼\nè®©åå°ä»»åŠ¡æ‹¥æœ‰è‡ªå·±çš„ç”Ÿå­˜æœŸ ä¸ºäº†ä¿è¯åå°æœåŠ¡çš„ä¾èµ–ä¸éšæ§åˆ¶å™¨é‡Šæ”¾è€Œé‡Šæ”¾ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„æœåŠ¡å¹¶å°†å…¶æ³¨å†Œä¸ºå•ä¾‹æœåŠ¡ï¼Œå› ä¸ºå•ä¾‹æœåŠ¡æ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚\nåˆ›å»ºä¸€ä¸ªåä¸ºCannonServiceçš„ç±»\nCannonService.cs\npublic class CannonService { private readonly ILogger\u0026lt;CannonService\u0026gt; _logger; private readonly IServiceProvider _serviceProvider; public CannonService(ILogger\u0026lt;CannonService\u0026gt; logger, IServiceProvider serviceProvider) { _logger = logger; _serviceProvider = serviceProvider; } public void Fire(Delegate dg, Action\u0026lt;Exception\u0026gt;?","title":"å¦‚ä½•åœ¨ ASP.NET Core WEB API ä¸­å¯åŠ¨åå°ä»»åŠ¡"},{"content":" Anduin Xue let today = new Beginning(); Aimer Neige Tech Otakus Save The World JimMoen Erlang Developer. ","permalink":"https://blog.fissssssh.com/links/","summary":" Anduin Xue let today = new Beginning(); Aimer Neige Tech Otakus Save The World JimMoen Erlang Developer. ","title":"å‹é“¾"},{"content":"Create a docker-compose.yml version: \u0026#34;3.9\u0026#34; services: redis-1: image: redis:7.0.2-alpine container_name: redis-1 ports: - \u0026#34;6371:6371\u0026#34; - \u0026#34;16371:16371\u0026#34; volumes: - ./node-1/data:/data - ./node-1/conf/redis.conf:/etc/redis/redis.conf networks: redis: ipv4_address: 172.28.0.11 command: - \u0026#34;redis-server\u0026#34; - \u0026#34;/etc/redis/redis.conf\u0026#34; redis-2: image: redis:7.0.2-alpine container_name: redis-2 ports: - \u0026#34;6372:6372\u0026#34; - \u0026#34;16372:16372\u0026#34; volumes: - ./node-2/data:/data - ./node-2/conf/redis.conf:/etc/redis/redis.conf networks: redis: ipv4_address: 172.28.0.12 command: - \u0026#34;redis-server\u0026#34; - \u0026#34;/etc/redis/redis.conf\u0026#34; redis-3: image: redis:7.0.2-alpine container_name: redis-3 ports: - \u0026#34;6373:6373\u0026#34; - \u0026#34;16373:16373\u0026#34; volumes: - ./node-3/data:/data - ./node-3/conf/redis.conf:/etc/redis/redis.conf networks: redis: ipv4_address: 172.28.0.13 command: - \u0026#34;redis-server\u0026#34; - \u0026#34;/etc/redis/redis.conf\u0026#34; redis-4: image: redis:7.0.2-alpine container_name: redis-4 ports: - \u0026#34;6374:6374\u0026#34; - \u0026#34;16374:16374\u0026#34; volumes: - ./node-4/data:/data - ./node-4/conf/redis.conf:/etc/redis/redis.conf networks: redis: ipv4_address: 172.28.0.14 command: - \u0026#34;redis-server\u0026#34; - \u0026#34;/etc/redis/redis.conf\u0026#34; redis-5: image: redis:7.0.2-alpine container_name: redis-5 ports: - \u0026#34;6375:6375\u0026#34; - \u0026#34;16375:16375\u0026#34; volumes: - ./node-5/data:/data - ./node-5/conf/redis.conf:/etc/redis/redis.conf networks: redis: ipv4_address: 172.28.0.15 command: - \u0026#34;redis-server\u0026#34; - \u0026#34;/etc/redis/redis.conf\u0026#34; redis-6: image: redis:7.0.2-alpine container_name: redis-6 ports: - \u0026#34;6376:6376\u0026#34; - \u0026#34;16376:16376\u0026#34; volumes: - ./node-6/data:/data - ./node-6/conf/redis.conf:/etc/redis/redis.conf networks: redis: ipv4_address: 172.28.0.16 command: - \u0026#34;redis-server\u0026#34; - \u0026#34;/etc/redis/redis.conf\u0026#34; redis-cluster: image: redis:7.0.2-alpine networks: redis: ipv4_address: 172.28.0.17 depends_on: - redis-1 - redis-2 - redis-3 - redis-4 - redis-5 - redis-6 command: - \u0026#34;redis-cli\u0026#34; - \u0026#34;--cluster\u0026#34; - \u0026#34;create\u0026#34; - \u0026#34;172.28.0.11:6371\u0026#34; - \u0026#34;172.28.0.12:6372\u0026#34; - \u0026#34;172.28.0.13:6373\u0026#34; - \u0026#34;172.28.0.14:6374\u0026#34; - \u0026#34;172.28.0.15:6375\u0026#34; - \u0026#34;172.28.0.16:6376\u0026#34; - \u0026#34;--cluster-replicas\u0026#34; - \u0026#34;1\u0026#34; - \u0026#34;--cluster-yes\u0026#34; networks: redis: ipam: config: - subnet: \u0026#34;172.28.0.0/16\u0026#34; There has a container named redis-cluster, the container is for create cluster for redis nodes, if you dont like this, you can enter any redis node container and execute the following command\nredis-cli --cluster create \\ 172.28.0.11:6371 \\ 172.28.0.12:6372 \\ 172.28.0.13:6373 \\ 172.28.0.14:6374 \\ 172.28.0.15:6375 \\ 172.28.0.16:6376 \\ --cluster-replicas 1 --cluster-yes Create config files for every redis node Run the following commands to create config files\nfor port in $(seq 1 6); \\ do \\ mkdir -p ./node-${port}/conf touch ./node-${port}/conf/redis.conf cat \u0026lt;\u0026lt; EOF \u0026gt; ./node-${port}/conf/redis.conf port 637${port} bind 0.0.0.0 cluster-enabled yes cluster-config-file nodes.conf cluster-node-timeout 5000 cluster-announce-ip \u0026lt;your_ip\u0026gt; cluster-announce-port 637${port} cluster-announce-bus-port 1637${port} appendonly yes EOF done Don\u0026rsquo;t forget to provide your actual IP address instead of \u0026lt;your_ip\u0026gt; (f.i. 10.12.123.124). Otherwise nodes wouldn\u0026rsquo;t join into cluster.\nYou can change port range if nesscessary\nfor port in $(seq 1 6); \\ ... -port 637${port} +port \u0026lt;port_prefix\u0026gt;${port} ... -cluster-announce-port 637${port} -cluster-announce-bus-port 1637${port} +cluster-announce-port \u0026lt;port_prefix\u0026gt;${port} +cluster-announce-bus-port \u0026lt;cluster_announce_bus_port_prefix\u0026gt;${port} ... done It also need to change docker-compose.yml\nversion: \u0026#34;3.9\u0026#34; services: redis-1: ... ports: - - \u0026#34;6371:6371\u0026#34; - - \u0026#34;16371:16371\u0026#34; + - \u0026#34;\u0026lt;port_prefix\u0026gt;1:\u0026lt;port_prefix\u0026gt;1\u0026#34; + - \u0026#34;\u0026lt;cluster_announce_bus_port_prefix\u0026gt;1:\u0026lt;cluster_announce_bus_port_prefix\u0026gt;1\u0026#34; ... redis-2: ... ports: - - \u0026#34;6372:6372\u0026#34; - - \u0026#34;16372:16372\u0026#34; + - \u0026#34;\u0026lt;port_prefix\u0026gt;:\u0026lt;port_prefix\u0026gt;\u0026#34; + - \u0026#34;\u0026lt;cluster_announce_bus_port_prefix\u0026gt;2:\u0026lt;cluster_announce_bus_port_prefix\u0026gt;2\u0026#34; ... redis-3: ... ports: - - \u0026#34;6373:6373\u0026#34; - - \u0026#34;16373:16373\u0026#34; + - \u0026#34;\u0026lt;port_prefix\u0026gt;3:\u0026lt;port_prefix\u0026gt;3\u0026#34; + - \u0026#34;\u0026lt;cluster_announce_bus_port_prefix\u0026gt;3:\u0026lt;cluster_announce_bus_port_prefix\u0026gt;3\u0026#34; ... redis-4: ... ports: - - \u0026#34;6374:6374\u0026#34; - - \u0026#34;16374:16374\u0026#34; + - \u0026#34;\u0026lt;port_prefix\u0026gt;4:\u0026lt;port_prefix\u0026gt;4\u0026#34; + - \u0026#34;\u0026lt;cluster_announce_bus_port_prefix\u0026gt;4:\u0026lt;cluster_announce_bus_port_prefix\u0026gt;4\u0026#34; ... redis-5: ... ports: - - \u0026#34;6375:6375\u0026#34; - - \u0026#34;16375:16375\u0026#34; + - \u0026#34;\u0026lt;port_prefix\u0026gt;5:\u0026lt;port_prefix\u0026gt;5\u0026#34; + - \u0026#34;\u0026lt;cluster_announce_bus_port_prefix\u0026gt;5:\u0026lt;cluster_announce_bus_port_prefix\u0026gt;5\u0026#34; ... redis-6: ... ports: - - \u0026#34;6376:6376\u0026#34; - - \u0026#34;16376:16376\u0026#34; + - \u0026#34;\u0026lt;port_prefix\u0026gt;6:\u0026lt;port_prefix\u0026gt;6\u0026#34; + - \u0026#34;\u0026lt;cluster_announce_bus_port_prefix\u0026gt;6:\u0026lt;cluster_announce_bus_port_prefix\u0026gt;6\u0026#34; ... redis-cluster: ... command: ... - - \u0026#34;172.28.0.11:6371\u0026#34; - - \u0026#34;172.28.0.12:6372\u0026#34; - - \u0026#34;172.28.0.13:6373\u0026#34; - - \u0026#34;172.28.0.14:6374\u0026#34; - - \u0026#34;172.28.0.15:6375\u0026#34; - - \u0026#34;172.28.0.16:6376\u0026#34; + - \u0026#34;172.28.0.11:\u0026lt;port_prefix\u0026gt;1\u0026#34; + - \u0026#34;172.28.0.12:\u0026lt;port_prefix\u0026gt;2\u0026#34; + - \u0026#34;172.28.0.13:\u0026lt;port_prefix\u0026gt;3\u0026#34; + - \u0026#34;172.28.0.14:\u0026lt;port_prefix\u0026gt;4\u0026#34; + - \u0026#34;172.28.0.15:\u0026lt;port_prefix\u0026gt;5\u0026#34; + - \u0026#34;172.28.0.16:\u0026lt;port_prefix\u0026gt;6\u0026#34; ... Start redis cluster Just run command docker-compose up -d.\n","permalink":"https://blog.fissssssh.com/posts/create-redis-cluster-by-docker-compose/","summary":"Create a docker-compose.yml version: \u0026#34;3.9\u0026#34; services: redis-1: image: redis:7.0.2-alpine container_name: redis-1 ports: - \u0026#34;6371:6371\u0026#34; - \u0026#34;16371:16371\u0026#34; volumes: - ./node-1/data:/data - ./node-1/conf/redis.conf:/etc/redis/redis.conf networks: redis: ipv4_address: 172.28.0.11 command: - \u0026#34;redis-server\u0026#34; - \u0026#34;/etc/redis/redis.conf\u0026#34; redis-2: image: redis:7.0.2-alpine container_name: redis-2 ports: - \u0026#34;6372:6372\u0026#34; - \u0026#34;16372:16372\u0026#34; volumes: - ./node-2/data:/data - ./node-2/conf/redis.conf:/etc/redis/redis.conf networks: redis: ipv4_address: 172.28.0.12 command: - \u0026#34;redis-server\u0026#34; - \u0026#34;/etc/redis/redis.conf\u0026#34; redis-3: image: redis:7.0.2-alpine container_name: redis-3 ports: - \u0026#34;6373:6373\u0026#34; - \u0026#34;16373:16373\u0026#34; volumes: - ./node-3/data:/data - ./node-3/conf/redis.conf:/etc/redis/redis.conf networks: redis: ipv4_address: 172.","title":"Create Redis Cluster by Docker Compose"},{"content":"é—®é¢˜æè¿° è¿‘æ—¥æˆ‘ä½¿ç”¨ hugo æ„å»ºäº†æˆ‘çš„åšå®¢ï¼Œå¹¶é€šè¿‡ Github Action å°†å…¶å‘å¸ƒåœ¨ Github Pages ä¸Šï¼Œåˆšå¼€å§‹è¿˜æ˜¯å¾ˆç¾å¥½çš„ï¼Œä½†æ˜¯è¿‡ä¸€çŸ­æ—¶é—´ä»¥åæ‰“å¼€é¡µé¢å‘ç°æ ·å¼å…¨æ— ï¼Œä½¿ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æŸ¥çœ‹èµ„æºè·å–æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨æ§åˆ¶å°å´å‡ºç°äº†è¿™æ ·ä¸€å¥è¯ï¼š\nFailed to find a valid digest in the \u0026#39;integrity\u0026#39; attribute for resource \u0026#39;***\u0026#39; with computed SHA-256 integrity \u0026#39;***\u0026#39;. The resource has been blocked. å¯»æ‰¾åŸå›  æˆ‘åœ¨ MDN ä¸Šå¯»æ‰¾åˆ°äº†å…³äº integrity çš„å®šä¹‰ï¼Œå¤§æ¦‚æè¿°å°±æ˜¯è¿™æ˜¯ä¸€ä¸ªç­¾åï¼Œæµè§ˆå™¨è·å–åˆ°ç›¸åº”èµ„æºåä¼šç”¨ç›¸åŒçš„æ–¹æ³•è®¡ç®—ä¸€ä¸ªç­¾åï¼Œåªæœ‰ç­¾åç›¸åŒæ—¶æ‰ä¼šåŠ è½½å¯¹åº”çš„èµ„æºï¼Œå¦‚æœä¸¤ä¸ªç­¾åä¸ä¸€è‡´åˆ™æ˜¯æ–‡ä»¶å®Œæ•´æ€§è¢«ç ´åï¼ˆæ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜ï¼‰ã€‚\né—®é¢˜æ¥äº†ï¼Œæ•´ä¸ªå‘å¸ƒè¿‡ç¨‹æ˜¯ç”± Github Action å…¨è‡ªåŠ¨æ“ä½œçš„ï¼Œæ²¡æœ‰äººä¸ºå¹²é¢„ï¼Œæ–‡ä»¶ä¸ºä½•ä¼šæ— ç¼˜æ— æ•…æ”¹å˜å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯ Cloudflareã€‚ Cloudflare ä¸­é»˜è®¤ä¼šå¼€å¯é™æ€èµ„æºçš„ç¼“å­˜æ¥æé«˜ç½‘ç«™çš„åŠ è½½é€Ÿåº¦ï¼Œå¯æ˜¯ä¸ºä»€ä¹ˆç¼“å­˜ä¼šæ”¹å˜æ–‡ä»¶å‘¢ï¼Ÿç¼“å­˜å¹¶ä¸ä¼šæ”¹å˜æ–‡ä»¶ï¼Œåœ¨ Cloudflare çš„ Speed \u0026gt; Optimization ä¸­æœ‰ä¸€ä¸ªå« Auto Minify çš„é€‰é¡¹ï¼Œæè¿°å¦‚ä¸‹ï¼š\nReduce the file size of source code on your website.\nNote: Purge cache to have your change take effect immediately.\nè¿™å¥è¯ç¿»è¯‘è¿‡æ¥å°±æ˜¯ å‡å°ç½‘ç«™æºä»£ç æ–‡ä»¶ä½“ç§¯çš„å¤§å° ï¼ŒåŒæ—¶è¯¥é€‰é¡¹æœ‰ 3 ä¸ªå­é€‰é¡¹ï¼š\nJavaScript CSS HTML é»˜è®¤éƒ½æ˜¯é€‰ä¸­çŠ¶æ€ï¼Œå³é»˜è®¤ä¼šå‹ç¼©æˆ‘ä»¬çš„ jsï¼Œcss å’Œ html æ–‡ä»¶ã€‚\nè§£å†³é—®é¢˜ å› ä¸ºæˆ‘ä»¬ç½‘ç«™æ˜¯ css æ–‡ä»¶çš„ç­¾åéªŒè¯å‡ºç°äº†é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬å–æ¶ˆ Auto Minify ä¸‹é¢çš„ Css é€‰é¡¹ï¼Œç„¶ååœ¨Caching \u0026gt; Configuration ä¸­ç‚¹å‡» Purge Cache æ¸…é™¤ç¼“å­˜ï¼Œå›åˆ°ç½‘ç«™ä½¿ç”¨ ctrl + F5 å¼ºåˆ¶åˆ·æ–°ç½‘é¡µï¼Œé—®é¢˜è§£å†³ã€‚\nå…¶ä»–è§£å†³æ–¹æ¡ˆ æˆ‘ä½¿ç”¨çš„æ˜¯ PaperMod ä¸»é¢˜ï¼Œå¯ä»¥åœ¨é…ç½®ä¸­å…³é—­æ ¡éªŒï¼š\nconfig.yaml\nparams: assets: disableFingerprinting: true å…³é—­æ ¡éªŒååœ¨ç”Ÿæˆé¡µé¢çš„æ—¶å€™ css æ–‡ä»¶å¼•ç”¨å°±ä¸ä¼šæœ‰ integrity å±æ€§\nç»“æŸè¯­ é‡åˆ°å›°éš¾ä»”ç»†åˆ†æï¼Œç»ˆä¼šè¿åˆƒè€Œè§£ã€‚\n","permalink":"https://blog.fissssssh.com/posts/css-integrity-error-when-load-hugo-publish/","summary":"é—®é¢˜æè¿° è¿‘æ—¥æˆ‘ä½¿ç”¨ hugo æ„å»ºäº†æˆ‘çš„åšå®¢ï¼Œå¹¶é€šè¿‡ Github Action å°†å…¶å‘å¸ƒåœ¨ Github Pages ä¸Šï¼Œåˆšå¼€å§‹è¿˜æ˜¯å¾ˆç¾å¥½çš„ï¼Œä½†æ˜¯è¿‡ä¸€çŸ­æ—¶é—´ä»¥åæ‰“å¼€é¡µé¢å‘ç°æ ·å¼å…¨æ— ï¼Œä½¿ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æŸ¥çœ‹èµ„æºè·å–æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨æ§åˆ¶å°å´å‡ºç°äº†è¿™æ ·ä¸€å¥è¯ï¼š\nFailed to find a valid digest in the \u0026#39;integrity\u0026#39; attribute for resource \u0026#39;***\u0026#39; with computed SHA-256 integrity \u0026#39;***\u0026#39;. The resource has been blocked. å¯»æ‰¾åŸå›  æˆ‘åœ¨ MDN ä¸Šå¯»æ‰¾åˆ°äº†å…³äº integrity çš„å®šä¹‰ï¼Œå¤§æ¦‚æè¿°å°±æ˜¯è¿™æ˜¯ä¸€ä¸ªç­¾åï¼Œæµè§ˆå™¨è·å–åˆ°ç›¸åº”èµ„æºåä¼šç”¨ç›¸åŒçš„æ–¹æ³•è®¡ç®—ä¸€ä¸ªç­¾åï¼Œåªæœ‰ç­¾åç›¸åŒæ—¶æ‰ä¼šåŠ è½½å¯¹åº”çš„èµ„æºï¼Œå¦‚æœä¸¤ä¸ªç­¾åä¸ä¸€è‡´åˆ™æ˜¯æ–‡ä»¶å®Œæ•´æ€§è¢«ç ´åï¼ˆæ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜ï¼‰ã€‚\né—®é¢˜æ¥äº†ï¼Œæ•´ä¸ªå‘å¸ƒè¿‡ç¨‹æ˜¯ç”± Github Action å…¨è‡ªåŠ¨æ“ä½œçš„ï¼Œæ²¡æœ‰äººä¸ºå¹²é¢„ï¼Œæ–‡ä»¶ä¸ºä½•ä¼šæ— ç¼˜æ— æ•…æ”¹å˜å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯ Cloudflareã€‚ Cloudflare ä¸­é»˜è®¤ä¼šå¼€å¯é™æ€èµ„æºçš„ç¼“å­˜æ¥æé«˜ç½‘ç«™çš„åŠ è½½é€Ÿåº¦ï¼Œå¯æ˜¯ä¸ºä»€ä¹ˆç¼“å­˜ä¼šæ”¹å˜æ–‡ä»¶å‘¢ï¼Ÿç¼“å­˜å¹¶ä¸ä¼šæ”¹å˜æ–‡ä»¶ï¼Œåœ¨ Cloudflare çš„ Speed \u0026gt; Optimization ä¸­æœ‰ä¸€ä¸ªå« Auto Minify çš„é€‰é¡¹ï¼Œæè¿°å¦‚ä¸‹ï¼š\nReduce the file size of source code on your website.\nNote: Purge cache to have your change take effect immediately.","title":"Css Integrity Error When Load Hugo Publish"},{"content":"Introduction VSCode(Visual Studio Code) is a code editor redefined and optimized for building and debugging modern web and cloud applications.\nCode Snippets is a piece of code, the editor will auto complete a specific code when developer type some specific prefixes.\nCustom Code Snippets VSCode has many built-in code snippets, so I won\u0026rsquo;t go into details here, but mainly talk about how to customize code snippets.\nThere are two types of code snippets, one is global and the other is workspace, the difference between them is that the scope and storage location.\nglobal code snippets\nAny file opened by vscode can take effect and is stored in the installation directory.\nworkspace code snippets\nOnly the files in the workspace can take effect and are stored in the .vscode directory of the workspace.\nHow to create custom code snippets? Click File \u0026gt; Preferences \u0026gt; Configure User Snippets.\nClick New Global Snippets file... or New Snippets file for '\u0026lt;your_workspce_name\u0026gt;'....\nCode snippets store as json, Each snippet is defined under a snippet name and has a scope, prefix, body and description:\nscope: A comma separated ids of the languages where the snippet is applicable. If scope is left empty or omitted, the snippet gets applied to all languages prefix: It\u0026rsquo;s used to trigger the snippet and the body will be expanded and inserted. Possible variables are: $1, $2 for tab stops, $0 for the final cursor position, and ${1:label}, ${2:another} for placeholders body: The code description: The description of this code snippet Example:\n{ \u0026#34;scope\u0026#34;: \u0026#34;c\u0026#34;, \u0026#34;prefix\u0026#34;: \u0026#34;smain\u0026#34;, \u0026#34;body\u0026#34;: [ \u0026#34;#include \u0026lt;stdio.h\u0026gt;\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;int main(void)\u0026#34;, \u0026#34;{\u0026#34;, \u0026#34;\\t${1:/* Code here */}\u0026#34;, \u0026#34;\\treturn 0;\u0026#34;, \u0026#34;}\u0026#34; ] } A code snippets can store many code snippets, the root is a Object, a property corresponds to a code snippet\nExample:\n{ \u0026#34;Simple main\u0026#34;: { \u0026#34;scope\u0026#34;: \u0026#34;c\u0026#34;, \u0026#34;prefix\u0026#34;: \u0026#34;smain\u0026#34;, \u0026#34;body\u0026#34;: [ \u0026#34;#include \u0026lt;stdio.h\u0026gt;\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;int main(void)\u0026#34;, \u0026#34;{\u0026#34;, \u0026#34;\\t${1:/* Code here */}\u0026#34;, \u0026#34;\\treturn 0;\u0026#34;, \u0026#34;}\u0026#34; ] }, \u0026#34;Simple main c++\u0026#34;: { \u0026#34;scope\u0026#34;: \u0026#34;cpp\u0026#34;, \u0026#34;prefix\u0026#34;: \u0026#34;smainpp\u0026#34;, \u0026#34;body\u0026#34;: [ \u0026#34;#include \u0026lt;iostream\u0026gt;\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;using namespace std;\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;int main()\u0026#34;, \u0026#34;{\u0026#34;, \u0026#34;\\t${1:/* Code here */}\u0026#34;, \u0026#34;\\treturn 0;\u0026#34;, \u0026#34;}\u0026#34; ] } } Use code snippets\nRemarks Reasonable use of code snippets can greatly improve our coding efficiency\n","permalink":"https://blog.fissssssh.com/posts/code-snippets.in-vscode/","summary":"Introduction VSCode(Visual Studio Code) is a code editor redefined and optimized for building and debugging modern web and cloud applications.\nCode Snippets is a piece of code, the editor will auto complete a specific code when developer type some specific prefixes.\nCustom Code Snippets VSCode has many built-in code snippets, so I won\u0026rsquo;t go into details here, but mainly talk about how to customize code snippets.\nThere are two types of code snippets, one is global and the other is workspace, the difference between them is that the scope and storage location.","title":"Code Snippets in VSCode"},{"content":"ä»¥ä¸‹æ˜¯æˆ‘æœ¬äººå¹³æ—¶å–œæ¬¢ç”¨çš„è½¯ä»¶ï¼Œæ’åä¸åˆ†å…ˆå\nåç§° æè¿° ç±»å‹ 7-Zip å‹ç¼©è½¯ä»¶ desktop Fiddler HTTP æŠ“åŒ…å·¥å…· desktop Git ä»£ç ç®¡ç†è½¯ä»¶ cli,desktop Google Chrome é¡¶çº§æµè§ˆå™¨ desktop MPC-HC è§†é¢‘æ’­æ”¾å™¨ desktop MSI Afterburner æ€§èƒ½ç›‘è§†è¶…é¢‘è½¯ä»¶ desktop MacType Windows å­—ä½“æ¸²æŸ“ desktop OBS Studio æ¨æµå·¥å…· desktop PowerToys Windows å°å·¥å…·é›†åˆ desktop Sourcetree ä»£ç ç®¡ç†è½¯ä»¶ desktop ToDesk è¿œç¨‹æ¡Œé¢å·¥å…· desktop Virtual Audio Cable éŸ³é¢‘ç®¡ç†è½¯ä»¶ desktop Visual Studio Code åƒé¥­çš„å®¶ä¼™ desktop Visual Studio åƒé¥­çš„å®¶ä¼™ desktop Voicemetter Banana éŸ³é¢‘ç®¡ç†è½¯ä»¶ desktop WinHex æ–‡ä»¶æŸ¥çœ‹å·¥å…· desktop WinSCP æ–‡ä»¶å¤åˆ¶å·¥å…· desktop WinaeroTweaker Windows å·¥å…· desktop WireShark ç½‘ç»œæŠ“åŒ…å·¥å…· desktop Wiztree ç£ç›˜åˆ†æå·¥å…· desktop dnSpy .NET åç¼–è¯‘è°ƒè¯•è½¯ä»¶ desktop docker å®¹å™¨ç¯å¢ƒ cli, desktop ffmpeg æµåª’ä½“å¤„ç†å·¥å…· cli hugo é™æ€é¡µé¢æ„å»ºå·¥å…· cli è¿…é›· ä¸‹è½½å·¥å…· desktop ","permalink":"https://blog.fissssssh.com/posts/recommended-software/","summary":"ä»¥ä¸‹æ˜¯æˆ‘æœ¬äººå¹³æ—¶å–œæ¬¢ç”¨çš„è½¯ä»¶ï¼Œæ’åä¸åˆ†å…ˆå\nåç§° æè¿° ç±»å‹ 7-Zip å‹ç¼©è½¯ä»¶ desktop Fiddler HTTP æŠ“åŒ…å·¥å…· desktop Git ä»£ç ç®¡ç†è½¯ä»¶ cli,desktop Google Chrome é¡¶çº§æµè§ˆå™¨ desktop MPC-HC è§†é¢‘æ’­æ”¾å™¨ desktop MSI Afterburner æ€§èƒ½ç›‘è§†è¶…é¢‘è½¯ä»¶ desktop MacType Windows å­—ä½“æ¸²æŸ“ desktop OBS Studio æ¨æµå·¥å…· desktop PowerToys Windows å°å·¥å…·é›†åˆ desktop Sourcetree ä»£ç ç®¡ç†è½¯ä»¶ desktop ToDesk è¿œç¨‹æ¡Œé¢å·¥å…· desktop Virtual Audio Cable éŸ³é¢‘ç®¡ç†è½¯ä»¶ desktop Visual Studio Code åƒé¥­çš„å®¶ä¼™ desktop Visual Studio åƒé¥­çš„å®¶ä¼™ desktop Voicemetter Banana éŸ³é¢‘ç®¡ç†è½¯ä»¶ desktop WinHex æ–‡ä»¶æŸ¥çœ‹å·¥å…· desktop WinSCP æ–‡ä»¶å¤åˆ¶å·¥å…· desktop WinaeroTweaker Windows å·¥å…· desktop WireShark ç½‘ç»œæŠ“åŒ…å·¥å…· desktop Wiztree ç£ç›˜åˆ†æå·¥å…· desktop dnSpy .","title":"è½¯ä»¶æ¨è"}]